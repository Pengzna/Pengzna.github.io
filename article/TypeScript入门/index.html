<!DOCTYPE html>
<html lang="en">

  <head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="keywords" content="Pengzna,blog" />
  <meta name="author" content="Pengzna" />
  <meta name="description" content="Pengzna çš„åšå®¢" />
  
  
  <title>
    
      TypeScript Â·å…¥é—¨ 
      
      
    
  </title>

  
    <link rel="apple-touch-icon" href="/images/favicon.png">
    <link rel="icon" href="/images/favicon.png">
  

  <!-- Raleway-Font -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat|Roboto:400,400italic,600|Roboto+Mono" rel="stylesheet">

  <!-- hexo site css -->
  
<link rel="stylesheet" href="/css/base.css">
<link rel="stylesheet" href="/css/common.css">
<link rel="stylesheet" href="/iconfont/iconfont.css">


  

  
    
<link rel="stylesheet" href="/css/post.css">

  

  <!-- jquery3.3.1 -->
  <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

  <!-- fancybox -->
  <link href="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.css" rel="stylesheet">
  <script async src="https://cdn.bootcss.com/fancybox/3.5.2/jquery.fancybox.min.js"></script>
  
<script src="/js/fancybox.js"></script>


<meta name="generator" content="Hexo 7.0.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>


  <body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="app">
      <div class="header">
  <a href="/">Pengzna's blog ğŸ‘‹</a>
</div>


      <p class="links">
  
    <a title="archives" target="" href="/archives/">
      <i class="iconfont icon-bookmark"></i>
    </a>
  
    <a title="github" target="_blank" href="https://github.com/Pengzna">
      <i class="iconfont icon-github"></i>
    </a>
  
    <a title="email" target="_blank" href="mailto:junzhi.pengzna@gmail.com">
      <i class="iconfont icon-envelope"></i>
    </a>
  
    <a title="linkedin" target="_blank" href="https://www.linkedin.com/in/pengzna/">
      <i class="iconfont icon-linkedin"></i>
    </a>
  
    <a title="wechat" target="_blank" href="https://peng-img.oss-cn-shanghai.aliyuncs.com/markdown-img/image-20231115013033249.png">
      <i class="iconfont icon-wechat"></i>
    </a>
  
</p>


      <div class="main">
        <!-- æ–‡ç« è¯¦æƒ…é¡µï¼Œå±•ç¤ºæ–‡ç« å…·ä½“å†…å®¹ï¼Œurlå½¢å¼ï¼šhttps://yoursite/æ–‡ç« æ ‡é¢˜/ -->
<!-- åŒæ—¶ä¸ºã€Œæ ‡ç­¾tagã€ï¼Œã€Œæœ‹å‹friendã€ï¼Œã€Œåˆ†ç±»categoriesã€ï¼Œã€Œå…³äºaboutã€é¡µé¢çš„æ‰¿è½½é¡µé¢ï¼Œå…·ä½“å±•ç¤ºå–å†³äºpage.type -->

<!-- LaTex Display -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js">
</script>
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']]
    }
  };
</script>

<div class="post">
  <h3 class="date">
    Jul 25, 2022
  </h3>
  <h1>
    TypeScript Â·å…¥é—¨
  </h1>
  <div class="content markdown-body">
    <h2 id="1-TypeScript-ç®€ä»‹"><a href="#1-TypeScript-ç®€ä»‹" class="headerlink" title="1. TypeScript ç®€ä»‹"></a>1. TypeScript ç®€ä»‹</h2><h3 id="1-1-TypeScript-ä¸-JavaScript-çš„åŒºåˆ«"><a href="#1-1-TypeScript-ä¸-JavaScript-çš„åŒºåˆ«" class="headerlink" title="1.1 TypeScript ä¸ JavaScript çš„åŒºåˆ«"></a>1.1 TypeScript ä¸ JavaScript çš„åŒºåˆ«</h3><table>
<thead>
<tr>
<th>TypeScript</th>
<th>JavaScript</th>
</tr>
</thead>
<tbody><tr>
<td>JavaScript çš„è¶…é›†ç”¨äºè§£å†³å¤§å‹é¡¹ç›®çš„ä»£ç å¤æ‚æ€§</td>
<td>ä¸€ç§è„šæœ¬è¯­è¨€ï¼Œç”¨äºåˆ›å»ºåŠ¨æ€ç½‘é¡µã€‚</td>
</tr>
<tr>
<td>å¯ä»¥åœ¨ç¼–è¯‘æœŸé—´å‘ç°å¹¶çº æ­£é”™è¯¯</td>
<td>ä½œä¸ºä¸€ç§è§£é‡Šå‹è¯­è¨€ï¼Œåªèƒ½åœ¨è¿è¡Œæ—¶å‘ç°é”™è¯¯</td>
</tr>
<tr>
<td>å¼ºç±»å‹ï¼Œæ”¯æŒé™æ€å’ŒåŠ¨æ€ç±»å‹</td>
<td>å¼±ç±»å‹ï¼Œæ²¡æœ‰é™æ€ç±»å‹é€‰é¡¹</td>
</tr>
<tr>
<td>æœ€ç»ˆè¢«ç¼–è¯‘æˆ JavaScript ä»£ç ï¼Œä½¿æµè§ˆå™¨å¯ä»¥ç†è§£</td>
<td>å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­ä½¿ç”¨</td>
</tr>
<tr>
<td>æ”¯æŒæ¨¡å—ã€æ³›å‹å’Œæ¥å£</td>
<td>ä¸æ”¯æŒæ¨¡å—ï¼Œæ³›å‹æˆ–æ¥å£</td>
</tr>
<tr>
<td>æ”¯æŒ ES3ï¼ŒES4ï¼ŒES5 å’Œ ES6 ç­‰</td>
<td>ä¸æ”¯æŒç¼–è¯‘å…¶ä»– ES3ï¼ŒES4ï¼ŒES5 æˆ– ES6 åŠŸèƒ½</td>
</tr>
<tr>
<td>ç¤¾åŒºçš„æ”¯æŒä»åœ¨å¢é•¿ï¼Œè€Œä¸”è¿˜ä¸æ˜¯å¾ˆå¤§</td>
<td>å¤§é‡çš„ç¤¾åŒºæ”¯æŒä»¥åŠå¤§é‡æ–‡æ¡£å’Œè§£å†³é—®é¢˜çš„æ”¯æŒ</td>
</tr>
</tbody></table>
<h3 id="1-2-è·å–-TypeScript"><a href="#1-2-è·å–-TypeScript" class="headerlink" title="1.2 è·å– TypeScript"></a>1.2 è·å– TypeScript</h3><p>å‘½ä»¤è¡Œçš„ TypeScript ç¼–è¯‘å™¨å¯ä»¥ä½¿ç”¨ Node.js åŒ…æ¥å®‰è£…ã€‚</p>
<p><strong>1.å®‰è£… TypeScript</strong></p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="variable">$ </span>npm install -g typescript</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p><strong>2.ç¼–è¯‘ TypeScript æ–‡ä»¶</strong></p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="variable">$ </span>tsc helloworld.ts</span><br><span class="line"><span class="comment"># helloworld.ts =&gt; helloworld.js</span></span><br></pre></td></tr></table></figure>

<h2 id="2-TypeScript-åŸºç¡€ç±»å‹"><a href="#2-TypeScript-åŸºç¡€ç±»å‹" class="headerlink" title="2. TypeScript åŸºç¡€ç±»å‹"></a>2. TypeScript åŸºç¡€ç±»å‹</h2><h3 id="2-1-Boolean-ç±»å‹"><a href="#2-1-Boolean-ç±»å‹" class="headerlink" title="2.1 Boolean ç±»å‹"></a>2.1 Boolean ç±»å‹</h3><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">let isDone: <span class="attr">boolean</span> = <span class="literal">false</span><span class="comment">;</span></span><br><span class="line">// ES5ï¼švar <span class="attr">isDone</span> = <span class="literal">false</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-2-Number-ç±»å‹"><a href="#2-2-Number-ç±»å‹" class="headerlink" title="2.2 Number ç±»å‹"></a>2.2 Number ç±»å‹</h3><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">let count: <span class="attr">number</span> = <span class="number">10</span><span class="comment">;</span></span><br><span class="line">// ES5ï¼švar <span class="attr">count</span> = <span class="number">10</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-3-String-ç±»å‹"><a href="#2-3-String-ç±»å‹" class="headerlink" title="2.3 String ç±»å‹"></a>2.3 String ç±»å‹</h3><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">let name: <span class="attr">string</span> = <span class="string">&quot;Semliker&quot;</span><span class="comment">;</span></span><br><span class="line">// ES5ï¼švar <span class="attr">name</span> = <span class="string">&#x27;Semlinker&#x27;</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-4-Array-ç±»å‹"><a href="#2-4-Array-ç±»å‹" class="headerlink" title="2.4 Array ç±»å‹"></a>2.4 Array ç±»å‹</h3><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">let list: number<span class="section">[]</span> = <span class="section">[1, 2, 3]</span><span class="comment">;</span></span><br><span class="line">// ES5ï¼švar <span class="attr">list</span> = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">let list: Array&lt;number&gt; = <span class="section">[1, 2, 3]</span><span class="comment">; // Array&lt;number&gt;æ³›å‹è¯­æ³•</span></span><br><span class="line">// ES5ï¼švar <span class="attr">list</span> = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-5-Enum-ç±»å‹"><a href="#2-5-Enum-ç±»å‹" class="headerlink" title="2.5 Enum ç±»å‹"></a>2.5 Enum ç±»å‹</h3><p>ä½¿ç”¨æšä¸¾æˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€äº›å¸¦åå­—çš„å¸¸é‡ã€‚ ä½¿ç”¨æšä¸¾å¯ä»¥æ¸…æ™°åœ°è¡¨è¾¾æ„å›¾æˆ–åˆ›å»ºä¸€ç»„æœ‰åŒºåˆ«çš„ç”¨ä¾‹ã€‚ TypeScript æ”¯æŒæ•°å­—çš„å’ŒåŸºäºå­—ç¬¦ä¸²çš„æšä¸¾ã€‚</p>
<h4 id="2-5-1-æ•°å­—æšä¸¾"><a href="#2-5-1-æ•°å­—æšä¸¾" class="headerlink" title="2.5.1.æ•°å­—æšä¸¾"></a><strong>2.5.1.æ•°å­—æšä¸¾</strong></h4><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">enum Direction &#123;</span><br><span class="line">  NORTH,</span><br><span class="line">  SOUTH,</span><br><span class="line">  EAST,</span><br><span class="line">  WEST,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let dir: <span class="attr">Direction</span> = Direction.NORTH<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒNORTH çš„åˆå§‹å€¼ä¸º 0ï¼Œå…¶ä½™çš„æˆå‘˜ä¼šä» 1 å¼€å§‹è‡ªåŠ¨å¢é•¿ã€‚æ¢å¥è¯è¯´ï¼ŒDirection.SOUTH çš„å€¼ä¸º 1ï¼ŒDirection.EAST çš„å€¼ä¸º 2ï¼ŒDirection.WEST çš„å€¼ä¸º 3ã€‚ä¸Šé¢çš„æšä¸¾ç¤ºä¾‹ä»£ç ç»è¿‡ç¼–è¯‘åä¼šç”Ÿæˆä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Direction</span></span><br><span class="line">;(<span class="keyword">function</span> (<span class="params">Direction</span>) &#123;</span><br><span class="line">  <span class="title class_">Direction</span>[(<span class="title class_">Direction</span>[<span class="string">&#x27;NORTH&#x27;</span>] = <span class="number">0</span>)] = <span class="string">&#x27;NORTH&#x27;</span></span><br><span class="line">  <span class="title class_">Direction</span>[(<span class="title class_">Direction</span>[<span class="string">&#x27;SOUTH&#x27;</span>] = <span class="number">1</span>)] = <span class="string">&#x27;SOUTH&#x27;</span></span><br><span class="line">  <span class="title class_">Direction</span>[(<span class="title class_">Direction</span>[<span class="string">&#x27;EAST&#x27;</span>] = <span class="number">2</span>)] = <span class="string">&#x27;EAST&#x27;</span></span><br><span class="line">  <span class="title class_">Direction</span>[(<span class="title class_">Direction</span>[<span class="string">&#x27;WEST&#x27;</span>] = <span class="number">3</span>)] = <span class="string">&#x27;WEST&#x27;</span></span><br><span class="line">&#125;)(<span class="title class_">Direction</span> || (<span class="title class_">Direction</span> = &#123;&#125;))</span><br><span class="line"><span class="keyword">var</span> dir = <span class="title class_">Direction</span>.<span class="property">NORTH</span></span><br></pre></td></tr></table></figure>

<p>å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥è®¾ç½® NORTH çš„åˆå§‹å€¼ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">enum Direction &#123;</span><br><span class="line">  <span class="attr">NORTH</span> = <span class="number">3</span>,</span><br><span class="line">  SOUTH,</span><br><span class="line">  EAST,</span><br><span class="line">  WEST,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2-5-2-å­—ç¬¦ä¸²æšä¸¾"><a href="#2-5-2-å­—ç¬¦ä¸²æšä¸¾" class="headerlink" title="2.5.2.å­—ç¬¦ä¸²æšä¸¾"></a>2.5.<strong>2.å­—ç¬¦ä¸²æšä¸¾</strong></h4><p>åœ¨ TypeScript 2.4 ç‰ˆæœ¬ï¼Œå…è®¸æˆ‘ä»¬ä½¿ç”¨å­—ç¬¦ä¸²æšä¸¾ã€‚åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾é‡Œï¼Œæ¯ä¸ªæˆå‘˜éƒ½å¿…é¡»ç”¨å­—ç¬¦ä¸²å­—é¢é‡ï¼Œæˆ–å¦å¤–ä¸€ä¸ªå­—ç¬¦ä¸²æšä¸¾æˆå‘˜è¿›è¡Œåˆå§‹åŒ–ã€‚</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">enum Direction &#123;</span><br><span class="line">  <span class="attr">NORTH</span> = <span class="string">&quot;NORTH&quot;</span>,</span><br><span class="line">  <span class="attr">SOUTH</span> = <span class="string">&quot;SOUTH&quot;</span>,</span><br><span class="line">  <span class="attr">EAST</span> = <span class="string">&quot;EAST&quot;</span>,</span><br><span class="line">  <span class="attr">WEST</span> = <span class="string">&quot;WEST&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä»£ç å¯¹äºçš„ ES5 ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Direction</span></span><br><span class="line">;(<span class="keyword">function</span> (<span class="params">Direction</span>) &#123;</span><br><span class="line">  <span class="title class_">Direction</span>[<span class="string">&#x27;NORTH&#x27;</span>] = <span class="string">&#x27;NORTH&#x27;</span></span><br><span class="line">  <span class="title class_">Direction</span>[<span class="string">&#x27;SOUTH&#x27;</span>] = <span class="string">&#x27;SOUTH&#x27;</span></span><br><span class="line">  <span class="title class_">Direction</span>[<span class="string">&#x27;EAST&#x27;</span>] = <span class="string">&#x27;EAST&#x27;</span></span><br><span class="line">  <span class="title class_">Direction</span>[<span class="string">&#x27;WEST&#x27;</span>] = <span class="string">&#x27;WEST&#x27;</span></span><br><span class="line">&#125;)(<span class="title class_">Direction</span> || (<span class="title class_">Direction</span> = &#123;&#125;))</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h4 id="2-5-3-å¼‚æ„æšä¸¾"><a href="#2-5-3-å¼‚æ„æšä¸¾" class="headerlink" title="2.5.3.å¼‚æ„æšä¸¾"></a>2.5.<strong>3.å¼‚æ„æšä¸¾</strong></h4><p>å¼‚æ„æšä¸¾çš„æˆå‘˜å€¼æ˜¯æ•°å­—å’Œå­—ç¬¦ä¸²çš„æ··åˆï¼š</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">enum Enum &#123;</span><br><span class="line">  A,</span><br><span class="line">  B,</span><br><span class="line">  <span class="attr">C</span> = <span class="string">&quot;C&quot;</span>,</span><br><span class="line">  <span class="attr">D</span> = <span class="string">&quot;D&quot;</span>,</span><br><span class="line">  <span class="attr">E</span> = <span class="number">8</span>,</span><br><span class="line">  F,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä»£ç å¯¹äºçš„ ES5 ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Enum</span></span><br><span class="line">;(<span class="keyword">function</span> (<span class="params">Enum</span>) &#123;</span><br><span class="line">  <span class="title class_">Enum</span>[(<span class="title class_">Enum</span>[<span class="string">&#x27;A&#x27;</span>] = <span class="number">0</span>)] = <span class="string">&#x27;A&#x27;</span></span><br><span class="line">  <span class="title class_">Enum</span>[(<span class="title class_">Enum</span>[<span class="string">&#x27;B&#x27;</span>] = <span class="number">1</span>)] = <span class="string">&#x27;B&#x27;</span></span><br><span class="line">  <span class="title class_">Enum</span>[<span class="string">&#x27;C&#x27;</span>] = <span class="string">&#x27;C&#x27;</span></span><br><span class="line">  <span class="title class_">Enum</span>[<span class="string">&#x27;D&#x27;</span>] = <span class="string">&#x27;D&#x27;</span></span><br><span class="line">  <span class="title class_">Enum</span>[(<span class="title class_">Enum</span>[<span class="string">&#x27;E&#x27;</span>] = <span class="number">8</span>)] = <span class="string">&#x27;E&#x27;</span></span><br><span class="line">  <span class="title class_">Enum</span>[(<span class="title class_">Enum</span>[<span class="string">&#x27;F&#x27;</span>] = <span class="number">9</span>)] = <span class="string">&#x27;F&#x27;</span></span><br><span class="line">&#125;)(<span class="title class_">Enum</span> || (<span class="title class_">Enum</span> = &#123;&#125;))</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è§‚å¯Ÿä¸Šè¿°ç”Ÿæˆçš„ ES5 ä»£ç ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°æ•°å­—æšä¸¾ç›¸å¯¹å­—ç¬¦ä¸²æšä¸¾å¤šäº† â€œåå‘æ˜ å°„â€ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line">console.<span class="built_in">log</span>(Enum.A) <span class="comment">//è¾“å‡ºï¼š0</span></span><br><span class="line">console.<span class="built_in">log</span>(Enum[<span class="number">0</span>]) <span class="comment">// è¾“å‡ºï¼šA</span></span><br></pre></td></tr></table></figure>

<h3 id="2-6-Any-ç±»å‹"><a href="#2-6-Any-ç±»å‹" class="headerlink" title="2.6 Any ç±»å‹"></a>2.6 Any ç±»å‹</h3><p>åœ¨ TypeScript ä¸­ï¼Œä»»ä½•ç±»å‹éƒ½å¯ä»¥è¢«å½’ä¸º any ç±»å‹ã€‚è¿™è®© any ç±»å‹æˆä¸ºäº†ç±»å‹ç³»ç»Ÿçš„<strong>é¡¶çº§ç±»å‹</strong>ï¼ˆä¹Ÿè¢«ç§°ä½œå…¨å±€è¶…çº§ç±»å‹ï¼‰ã€‚</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">let notSure: <span class="attr">any</span> = <span class="number">666</span><span class="comment">;</span></span><br><span class="line"><span class="attr">notSure</span> = <span class="string">&quot;Semlinker&quot;</span><span class="comment">;</span></span><br><span class="line"><span class="attr">notSure</span> = <span class="literal">false</span><span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p><code>any</code> ç±»å‹æœ¬è´¨ä¸Šæ˜¯ç±»å‹ç³»ç»Ÿçš„ä¸€ä¸ªé€ƒé€¸èˆ±ã€‚ä½œä¸ºå¼€å‘è€…ï¼Œè¿™ç»™äº†æˆ‘ä»¬å¾ˆå¤§çš„è‡ªç”±ï¼šTypeScript å…è®¸æˆ‘ä»¬å¯¹ <code>any</code> ç±»å‹çš„å€¼æ‰§è¡Œä»»ä½•æ“ä½œï¼Œè€Œæ— éœ€äº‹å…ˆæ‰§è¡Œä»»ä½•å½¢å¼çš„æ£€æŸ¥ã€‚æ¯”å¦‚ï¼š</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">let value: any;</span><br><span class="line"></span><br><span class="line">value<span class="selector-class">.foo</span><span class="selector-class">.bar</span>; <span class="comment">// OK</span></span><br><span class="line">value<span class="selector-class">.trim</span>(); <span class="comment">// OK</span></span><br><span class="line"><span class="built_in">value</span>(); <span class="comment">// OK</span></span><br><span class="line">new <span class="built_in">value</span>(); <span class="comment">// OK</span></span><br><span class="line">value<span class="selector-attr">[0]</span><span class="selector-attr">[1]</span>; <span class="comment">// OK</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>åœ¨è®¸å¤šåœºæ™¯ä¸‹ï¼Œè¿™å¤ªå®½æ¾äº†ã€‚ä½¿ç”¨ <code>any</code> ç±»å‹ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ç¼–å†™ç±»å‹æ­£ç¡®ä½†åœ¨è¿è¡Œæ—¶æœ‰é—®é¢˜çš„ä»£ç ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ <code>any</code> ç±»å‹ï¼Œå°±æ— æ³•ä½¿ç”¨ TypeScript æä¾›çš„å¤§é‡çš„ä¿æŠ¤æœºåˆ¶ã€‚ä¸ºäº†è§£å†³ <code>any</code> å¸¦æ¥çš„é—®é¢˜ï¼ŒTypeScript 3.0 å¼•å…¥äº† <code>unknown</code> ç±»å‹ã€‚</p>
<h3 id="2-7-Unknown-ç±»å‹"><a href="#2-7-Unknown-ç±»å‹" class="headerlink" title="2.7 Unknown ç±»å‹"></a>2.7 Unknown ç±»å‹</h3><p>å°±åƒæ‰€æœ‰ç±»å‹éƒ½å¯ä»¥èµ‹å€¼ç»™ <code>any</code>ï¼Œæ‰€æœ‰ç±»å‹ä¹Ÿéƒ½å¯ä»¥èµ‹å€¼ç»™ <code>unknown</code>ã€‚è¿™ä½¿å¾— <code>unknown</code> æˆä¸º TypeScript ç±»å‹ç³»ç»Ÿçš„å¦ä¸€ç§é¡¶çº§ç±»å‹ï¼ˆå¦ä¸€ç§æ˜¯ <code>any</code>ï¼‰ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ <code>unknown</code> ç±»å‹çš„ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">let value: unknown<span class="comment">;</span></span><br><span class="line"></span><br><span class="line"><span class="attr">value</span> = <span class="literal">true</span><span class="comment">; // OK</span></span><br><span class="line"><span class="attr">value</span> = <span class="number">42</span><span class="comment">; // OK</span></span><br><span class="line"><span class="attr">value</span> = <span class="string">&quot;Hello World&quot;</span><span class="comment">; // OK</span></span><br><span class="line"><span class="attr">value</span> = []<span class="comment">; // OK</span></span><br><span class="line"><span class="attr">value</span> = &#123;&#125;<span class="comment">; // OK</span></span><br><span class="line"><span class="attr">value</span> = Math.random<span class="comment">; // OK</span></span><br><span class="line"><span class="attr">value</span> = null<span class="comment">; // OK</span></span><br><span class="line"><span class="attr">value</span> = undefined<span class="comment">; // OK</span></span><br><span class="line"><span class="attr">value</span> = new TypeError()<span class="comment">; // OK</span></span><br><span class="line"><span class="attr">value</span> = Symbol(<span class="string">&quot;type&quot;</span>)<span class="comment">; // OK</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¯¹ <code>value</code> å˜é‡çš„æ‰€æœ‰èµ‹å€¼éƒ½è¢«è®¤ä¸ºæ˜¯ç±»å‹æ­£ç¡®çš„ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬å°è¯•å°†ç±»å‹ä¸º <code>unknown</code> çš„å€¼èµ‹å€¼ç»™å…¶ä»–ç±»å‹çš„å˜é‡æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">let value: unknown<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">let value1: <span class="attr">unknown</span> = value<span class="comment">; // OK</span></span><br><span class="line">let value2: <span class="attr">any</span> = value<span class="comment">; // OK</span></span><br><span class="line">let value3: <span class="attr">boolean</span> = value<span class="comment">; // Error</span></span><br><span class="line">let value4: <span class="attr">number</span> = value<span class="comment">; // Error</span></span><br><span class="line">let value5: <span class="attr">string</span> = value<span class="comment">; // Error</span></span><br><span class="line">let value6: <span class="attr">object</span> = value<span class="comment">; // Error</span></span><br><span class="line">let value7: any<span class="section">[]</span> = value<span class="comment">; // Error</span></span><br><span class="line">let value8: <span class="attr">Function</span> = value<span class="comment">; // Error</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>unknown</code> ç±»å‹åªèƒ½è¢«èµ‹å€¼ç»™ <code>any</code> ç±»å‹å’Œ <code>unknown</code> ç±»å‹æœ¬èº«ã€‚ç›´è§‚åœ°è¯´ï¼Œè¿™æ˜¯æœ‰é“ç†çš„ï¼šåªæœ‰èƒ½å¤Ÿä¿å­˜ä»»æ„ç±»å‹å€¼çš„å®¹å™¨æ‰èƒ½ä¿å­˜ <code>unknown</code> ç±»å‹çš„å€¼ã€‚æ¯•ç«Ÿæˆ‘ä»¬ä¸çŸ¥é“å˜é‡ <code>value</code> ä¸­å­˜å‚¨äº†ä»€ä¹ˆç±»å‹çš„å€¼ã€‚</p>
<p>ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬å°è¯•å¯¹ç±»å‹ä¸º <code>unknown</code> çš„å€¼æ‰§è¡Œæ“ä½œæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬åœ¨ä¹‹å‰ <code>any</code> ç« èŠ‚çœ‹è¿‡çš„ç›¸åŒæ“ä½œï¼š</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">let value: unknown;</span><br><span class="line"></span><br><span class="line">value<span class="selector-class">.foo</span><span class="selector-class">.bar</span>; <span class="comment">// Error</span></span><br><span class="line">value<span class="selector-class">.trim</span>(); <span class="comment">// Error</span></span><br><span class="line"><span class="built_in">value</span>(); <span class="comment">// Error</span></span><br><span class="line">new <span class="built_in">value</span>(); <span class="comment">// Error</span></span><br><span class="line">value<span class="selector-attr">[0]</span><span class="selector-attr">[1]</span>; <span class="comment">// Error</span></span><br></pre></td></tr></table></figure>

<p>å°† <code>value</code> å˜é‡ç±»å‹è®¾ç½®ä¸º <code>unknown</code> åï¼Œè¿™äº›æ“ä½œéƒ½ä¸å†è¢«è®¤ä¸ºæ˜¯ç±»å‹æ­£ç¡®çš„ã€‚é€šè¿‡å°† <code>any</code> ç±»å‹æ”¹å˜ä¸º <code>unknown</code> ç±»å‹ï¼Œæˆ‘ä»¬å·²å°†å…è®¸æ‰€æœ‰æ›´æ”¹çš„é»˜è®¤è®¾ç½®ï¼Œæ›´æ”¹ä¸º<strong>ç¦æ­¢ä»»ä½•æ›´æ”¹</strong>ã€‚</p>
<h3 id="2-8-Tuple-ç±»å‹"><a href="#2-8-Tuple-ç±»å‹" class="headerlink" title="2.8 Tuple ç±»å‹"></a>2.8 Tuple ç±»å‹</h3><p>ä¼—æ‰€å‘¨çŸ¥ï¼Œæ•°ç»„ä¸€èˆ¬ç”±åŒç§ç±»å‹çš„å€¼ç»„æˆï¼Œ<strong>ä½†æœ‰æ—¶æˆ‘ä»¬éœ€è¦åœ¨å•ä¸ªå˜é‡ä¸­å­˜å‚¨ä¸åŒç±»å‹çš„å€¼ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨å…ƒç»„</strong>ã€‚åœ¨ JavaScript ä¸­æ˜¯æ²¡æœ‰å…ƒç»„çš„ï¼Œå…ƒç»„æ˜¯ TypeScript ä¸­ç‰¹æœ‰çš„ç±»å‹ï¼Œå…¶å·¥ä½œæ–¹å¼ç±»ä¼¼äºæ•°ç»„ã€‚</p>
<p>å…ƒç»„å¯ç”¨äºå®šä¹‰å…·æœ‰æœ‰é™æ•°é‡çš„æœªå‘½åå±æ€§çš„ç±»å‹ã€‚æ¯ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªå…³è”çš„ç±»å‹ã€‚ä½¿ç”¨å…ƒç»„æ—¶ï¼Œå¿…é¡»æä¾›æ¯ä¸ªå±æ€§çš„å€¼ã€‚ä¸ºäº†æ›´ç›´è§‚åœ°ç†è§£å…ƒç»„çš„æ¦‚å¿µï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå…·ä½“çš„ä¾‹å­ï¼š</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">let tupleType: <span class="section">[string, boolean]</span><span class="comment">;</span></span><br><span class="line"><span class="attr">tupleType</span> = [<span class="string">&quot;Semlinker&quot;</span>, <span class="literal">true</span>]<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªåä¸º <code>tupleType</code> çš„å˜é‡ï¼Œå®ƒçš„ç±»å‹æ˜¯ä¸€ä¸ªç±»å‹æ•°ç»„ <code>[string, boolean]</code>ï¼Œç„¶åæˆ‘ä»¬æŒ‰ç…§æ­£ç¡®çš„ç±»å‹ä¾æ¬¡åˆå§‹åŒ– tupleType å˜é‡ã€‚ä¸æ•°ç»„ä¸€æ ·ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥è®¿é—®å…ƒç»„ä¸­çš„å…ƒç´ ï¼š</p>
<figure class="highlight arduino"><table><tr><td class="code"><pre><span class="line">console.<span class="built_in">log</span>(tupleType[<span class="number">0</span>]); <span class="comment">// Semlinker</span></span><br><span class="line">console.<span class="built_in">log</span>(tupleType[<span class="number">1</span>]); <span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<p>åœ¨å…ƒç»„åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¦‚æœå‡ºç°ç±»å‹ä¸åŒ¹é…çš„è¯ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">tupleType</span> = [<span class="literal">true</span>, <span class="string">&quot;Semlinker&quot;</span>]<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">[<span class="number">0</span>]: <span class="type">Type</span> <span class="string">&#x27;true&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> assignable to <span class="built_in">type</span> <span class="string">&#x27;string&#x27;</span>.</span><br><span class="line">[<span class="number">1</span>]: <span class="type">Type</span> <span class="string">&#x27;string&#x27;</span> <span class="keyword">is</span> <span class="keyword">not</span> assignable to <span class="built_in">type</span> <span class="string">&#x27;boolean&#x27;</span>.</span><br></pre></td></tr></table></figure>

<p>å¾ˆæ˜æ˜¾æ˜¯å› ä¸ºç±»å‹ä¸åŒ¹é…å¯¼è‡´çš„ã€‚åœ¨å…ƒç»„åˆå§‹åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»æä¾›<strong>æ¯ä¸ªå±æ€§çš„å€¼</strong>ï¼Œä¸ç„¶ä¹Ÿä¼šå‡ºç°é”™è¯¯ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line"><span class="attr">tupleType</span> = [<span class="string">&quot;Semlinker&quot;</span>]<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ï¼ŒTypeScript ç¼–è¯‘å™¨ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Property <span class="string">&#x27;1&#x27;</span> <span class="keyword">is</span> missing <span class="keyword">in</span> <span class="built_in">type</span> <span class="string">&#x27;[string]&#x27;</span> but required <span class="keyword">in</span> <span class="built_in">type</span> <span class="string">&#x27;[string, boolean]&#x27;</span>.</span><br></pre></td></tr></table></figure>

<h3 id="2-9-Void-ç±»å‹"><a href="#2-9-Void-ç±»å‹" class="headerlink" title="2.9 Void ç±»å‹"></a>2.9 Void ç±»å‹</h3><p>æŸç§ç¨‹åº¦ä¸Šæ¥è¯´ï¼Œvoid ç±»å‹åƒæ˜¯ä¸ any ç±»å‹ç›¸åï¼Œå®ƒè¡¨ç¤ºæ²¡æœ‰ä»»ä½•ç±»å‹ã€‚å½“ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼æ—¶ï¼Œä½ é€šå¸¸ä¼šè§åˆ°å…¶è¿”å›å€¼ç±»å‹æ˜¯ voidï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜å‡½æ•°è¿”å›å€¼ä¸ºvoid</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">warnUser</span>(<span class="params"></span>): <span class="keyword">void</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;This is my warning message&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä»£ç ç¼–è¯‘ç”Ÿæˆçš„ ES5 ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">warnUser</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;This is my warning message&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå£°æ˜ä¸€ä¸ª void ç±»å‹çš„å˜é‡æ²¡æœ‰ä»€ä¹ˆä½œç”¨ï¼Œå› ä¸ºå®ƒçš„å€¼åªèƒ½ä¸º <code>undefined</code> æˆ– <code>null</code>ï¼š</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">let unusable: <span class="attr">void</span> = undefined<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<h3 id="2-10-Null-å’Œ-Undefined-ç±»å‹"><a href="#2-10-Null-å’Œ-Undefined-ç±»å‹" class="headerlink" title="2.10 Null å’Œ Undefined ç±»å‹"></a>2.10 Null å’Œ Undefined ç±»å‹</h3><p>TypeScript é‡Œï¼Œ<code>undefined</code> å’Œ <code>null</code> ä¸¤è€…æœ‰å„è‡ªçš„ç±»å‹åˆ†åˆ«ä¸º <code>undefined</code> å’Œ <code>null</code>ã€‚</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">let u: <span class="attr">undefined</span> = undefined<span class="comment">;</span></span><br><span class="line">let n: <span class="attr">null</span> = null<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p>é»˜è®¤æƒ…å†µä¸‹ <code>null</code> å’Œ <code>undefined</code> æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹ã€‚ å°±æ˜¯è¯´ä½ å¯ä»¥æŠŠ <code>null</code> å’Œ <code>undefined</code> èµ‹å€¼ç»™ <code>number</code> ç±»å‹çš„å˜é‡ã€‚<strong>ç„¶è€Œï¼Œå¦‚æœä½ æŒ‡å®šäº†<code>--strictNullChecks</code> æ ‡è®°ï¼Œ<code>null</code> å’Œ <code>undefined</code> åªèƒ½èµ‹å€¼ç»™ <code>void</code> å’Œå®ƒä»¬å„è‡ªçš„ç±»å‹ã€‚</strong></p>
<h3 id="2-11-Never-ç±»å‹"><a href="#2-11-Never-ç±»å‹" class="headerlink" title="2.11 Never ç±»å‹"></a>2.11 Never ç±»å‹</h3><p><code>never</code> ç±»å‹è¡¨ç¤ºçš„æ˜¯é‚£äº›æ°¸ä¸å­˜åœ¨çš„å€¼çš„ç±»å‹ã€‚ ä¾‹å¦‚ï¼Œ<code>never</code> ç±»å‹æ˜¯é‚£äº›æ€»æ˜¯ä¼šæŠ›å‡ºå¼‚å¸¸æˆ–æ ¹æœ¬å°±ä¸ä¼šæœ‰è¿”å›å€¼çš„å‡½æ•°è¡¨è¾¾å¼æˆ–ç®­å¤´å‡½æ•°è¡¨è¾¾å¼çš„è¿”å›å€¼ç±»å‹ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// è¿”å›neverçš„å‡½æ•°å¿…é¡»å­˜åœ¨æ— æ³•è¾¾åˆ°çš„ç»ˆç‚¹</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">error</span>(<span class="params">message: <span class="built_in">string</span></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(message)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">infiniteLoop</span>(<span class="params"></span>): <span class="built_in">never</span> &#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="literal">true</span>) &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ TypeScript ä¸­ï¼Œå¯ä»¥åˆ©ç”¨ never ç±»å‹çš„ç‰¹æ€§æ¥å®ç°å…¨é¢æ€§æ£€æŸ¥ï¼Œå…·ä½“ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Foo</span> = <span class="built_in">string</span> | <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">controlFlowAnalysisWithNever</span>(<span class="params">foo: Foo</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> foo === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œ foo è¢«æ”¶çª„ä¸º string ç±»å‹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> foo === <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œ foo è¢«æ”¶çª„ä¸º number ç±»å‹</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// foo åœ¨è¿™é‡Œæ˜¯ never</span></span><br><span class="line">    <span class="keyword">const</span> <span class="attr">check</span>: <span class="built_in">never</span> = foo</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„åœ¨ else åˆ†æ”¯é‡Œé¢ï¼Œæˆ‘ä»¬æŠŠæ”¶çª„ä¸º never çš„ foo èµ‹å€¼ç»™ä¸€ä¸ªæ˜¾ç¤ºå£°æ˜çš„ never å˜é‡ã€‚å¦‚æœä¸€åˆ‡é€»è¾‘æ­£ç¡®ï¼Œé‚£ä¹ˆè¿™é‡Œåº”è¯¥èƒ½å¤Ÿç¼–è¯‘é€šè¿‡ã€‚ä½†æ˜¯å‡å¦‚åæ¥æœ‰ä¸€å¤©ä½ çš„åŒäº‹ä¿®æ”¹äº† Foo çš„ç±»å‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> <span class="title class_">Foo</span> = <span class="built_in">string</span> | <span class="built_in">number</span> | <span class="built_in">boolean</span></span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<p>ç„¶è€Œä»–å¿˜è®°åŒæ—¶ä¿®æ”¹ <code>controlFlowAnalysisWithNever</code> æ–¹æ³•ä¸­çš„æ§åˆ¶æµç¨‹ï¼Œè¿™æ—¶å€™ else åˆ†æ”¯çš„ foo ç±»å‹ä¼šè¢«æ”¶çª„ä¸º <code>boolean</code> ç±»å‹ï¼Œå¯¼è‡´æ— æ³•èµ‹å€¼ç»™ never ç±»å‹ï¼Œè¿™æ—¶å°±ä¼šäº§ç”Ÿä¸€ä¸ªç¼–è¯‘é”™è¯¯ã€‚é€šè¿‡è¿™ä¸ªæ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿</p>
<p><code>controlFlowAnalysisWithNever</code> æ–¹æ³•æ€»æ˜¯ç©·å°½äº† Foo çš„æ‰€æœ‰å¯èƒ½ç±»å‹ã€‚ é€šè¿‡è¿™ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š<strong>ä½¿ç”¨ never é¿å…å‡ºç°æ–°å¢äº†è”åˆç±»å‹æ²¡æœ‰å¯¹åº”çš„å®ç°ï¼Œç›®çš„å°±æ˜¯å†™å‡ºç±»å‹ç»å¯¹å®‰å…¨çš„ä»£ç ã€‚</strong></p>
<h2 id="3-TypeScript-æ–­è¨€"><a href="#3-TypeScript-æ–­è¨€" class="headerlink" title="3. TypeScript æ–­è¨€"></a>3. TypeScript æ–­è¨€</h2><p>æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°è¿™æ ·çš„æƒ…å†µï¼Œä½ ä¼šæ¯” TypeScript æ›´äº†è§£æŸä¸ªå€¼çš„è¯¦ç»†ä¿¡æ¯ã€‚é€šå¸¸è¿™ä¼šå‘ç”Ÿåœ¨ä½ æ¸…æ¥šåœ°çŸ¥é“ä¸€ä¸ªå®ä½“å…·æœ‰æ¯”å®ƒç°æœ‰ç±»å‹æ›´ç¡®åˆ‡çš„ç±»å‹ã€‚</p>
<p>é€šè¿‡ç±»å‹æ–­è¨€è¿™ç§æ–¹å¼å¯ä»¥å‘Šè¯‰ç¼–è¯‘å™¨ï¼Œâ€œç›¸ä¿¡æˆ‘ï¼Œæˆ‘çŸ¥é“è‡ªå·±åœ¨å¹²ä»€ä¹ˆâ€ã€‚ç±»å‹æ–­è¨€å¥½æ¯”å…¶ä»–è¯­è¨€é‡Œçš„ç±»å‹è½¬æ¢ï¼Œä½†æ˜¯ä¸è¿›è¡Œç‰¹æ®Šçš„æ•°æ®æ£€æŸ¥å’Œè§£æ„ã€‚å®ƒæ²¡æœ‰è¿è¡Œæ—¶çš„å½±å“ï¼Œåªæ˜¯åœ¨ç¼–è¯‘é˜¶æ®µèµ·ä½œç”¨ã€‚</p>
<p>ç±»å‹æ–­è¨€æœ‰ä¸¤ç§å½¢å¼ï¼š</p>
<h3 id="3-1-â€œå°–æ‹¬å·â€-è¯­æ³•"><a href="#3-1-â€œå°–æ‹¬å·â€-è¯­æ³•" class="headerlink" title="3.1. â€œå°–æ‹¬å·â€ è¯­æ³•"></a>3.1. â€œå°–æ‹¬å·â€ è¯­æ³•</h3><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">let someValue: <span class="attr">any</span> = <span class="string">&quot;this is a string&quot;</span><span class="comment">;</span></span><br><span class="line">let strLength: <span class="attr">number</span> = (&lt;string&gt;someValue).length<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<h3 id="3-2-as-è¯­æ³•"><a href="#3-2-as-è¯­æ³•" class="headerlink" title="3.2. as è¯­æ³•"></a>3.2. as è¯­æ³•</h3><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">let someValue: <span class="attr">any</span> = <span class="string">&quot;this is a string&quot;</span><span class="comment">;</span></span><br><span class="line">let strLength: <span class="attr">number</span> = (someValue as string).length<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<h2 id="4-ç±»å‹å®ˆå«"><a href="#4-ç±»å‹å®ˆå«" class="headerlink" title="4. ç±»å‹å®ˆå«"></a>4. ç±»å‹å®ˆå«</h2><blockquote>
<p>A type guard is some expression that performs a runtime check that guarantees the type in some scope. â€”â€” TypeScript å®˜æ–¹æ–‡æ¡£</p>
</blockquote>
<p>ç±»å‹ä¿æŠ¤æ˜¯å¯æ‰§è¡Œè¿è¡Œæ—¶æ£€æŸ¥çš„ä¸€ç§è¡¨è¾¾å¼ï¼Œç”¨äºç¡®ä¿è¯¥ç±»å‹åœ¨ä¸€å®šçš„èŒƒå›´å†…ã€‚æ¢å¥è¯è¯´ï¼Œç±»å‹ä¿æŠ¤å¯ä»¥ä¿è¯ä¸€ä¸ªå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå°½ç®¡å®ƒçš„å€¼ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæ•°å€¼ã€‚ç±»å‹ä¿æŠ¤ä¸ç‰¹æ€§æ£€æµ‹å¹¶ä¸æ˜¯å®Œå…¨ä¸åŒï¼Œå…¶ä¸»è¦æ€æƒ³æ˜¯å°è¯•æ£€æµ‹å±æ€§ã€æ–¹æ³•æˆ–åŸå‹ï¼Œä»¥ç¡®å®šå¦‚ä½•å¤„ç†å€¼ã€‚ç›®å‰ä¸»è¦æœ‰å››ç§çš„æ–¹å¼æ¥å®ç°ç±»å‹ä¿æŠ¤ï¼š</p>
<h3 id="4-1-in-å…³é”®å­—"><a href="#4-1-in-å…³é”®å­—" class="headerlink" title="4.1 in å…³é”®å­—"></a>4.1 in å…³é”®å­—</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Admin</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">privileges</span>: <span class="built_in">string</span>[]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">startDate</span>: <span class="title class_">Date</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">UnknownEmployee</span> = <span class="title class_">Employee</span> | <span class="title class_">Admin</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">printEmployeeInformation</span>(<span class="params">emp: UnknownEmployee</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Name: &#x27;</span> + emp.<span class="property">name</span>)</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">&#x27;privileges&#x27;</span> <span class="keyword">in</span> emp) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Privileges: &#x27;</span> + emp.<span class="property">privileges</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">&#x27;startDate&#x27;</span> <span class="keyword">in</span> emp) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Start Date: &#x27;</span> + emp.<span class="property">startDate</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-2-typeof-å…³é”®å­—"><a href="#4-2-typeof-å…³é”®å­—" class="headerlink" title="4.2 typeof å…³é”®å­—"></a>4.2 typeof å…³é”®å­—</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">padLeft</span>(<span class="params">value: <span class="built_in">string</span>, padding: <span class="built_in">string</span> | <span class="built_in">number</span></span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> padding === <span class="string">&#x27;number&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Array</span>(padding + <span class="number">1</span>).<span class="title function_">join</span>(<span class="string">&#x27; &#x27;</span>) + value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> padding === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> padding + value</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">`Expected string or number, got &#x27;<span class="subst">$&#123;padding&#125;</span>&#x27;.`</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>typeof</code> ç±»å‹ä¿æŠ¤åªæ”¯æŒä¸¤ç§å½¢å¼ï¼š<code>typeof v === &quot;typename&quot;</code> å’Œ <code>typeof v !== typename</code>ï¼Œ<code>&quot;typename&quot;</code> å¿…é¡»æ˜¯ <code>&quot;number&quot;</code>ï¼Œ <code>&quot;string&quot;</code>ï¼Œ <code>&quot;boolean&quot;</code> æˆ– <code>&quot;symbol&quot;</code>ã€‚ ä½†æ˜¯ TypeScript å¹¶ä¸ä¼šé˜»æ­¢ä½ ä¸å…¶å®ƒå­—ç¬¦ä¸²æ¯”è¾ƒï¼Œè¯­è¨€ä¸ä¼šæŠŠé‚£äº›è¡¨è¾¾å¼è¯†åˆ«ä¸ºç±»å‹ä¿æŠ¤ã€‚</p>
<h3 id="4-3-instanceof-å…³é”®å­—"><a href="#4-3-instanceof-å…³é”®å­—" class="headerlink" title="4.3 instanceof å…³é”®å­—"></a>4.3 instanceof å…³é”®å­—</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Padder</span> &#123;</span><br><span class="line">  <span class="title function_">getPaddingString</span>(): <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">SpaceRepeatingPadder</span> <span class="keyword">implements</span> <span class="title class_">Padder</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">private</span> numSpaces: <span class="built_in">number</span></span>) &#123;&#125;</span><br><span class="line">  <span class="title function_">getPaddingString</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">Array</span>(<span class="variable language_">this</span>.<span class="property">numSpaces</span> + <span class="number">1</span>).<span class="title function_">join</span>(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">StringPadder</span> <span class="keyword">implements</span> <span class="title class_">Padder</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params"><span class="keyword">private</span> value: <span class="built_in">string</span></span>) &#123;&#125;</span><br><span class="line">  <span class="title function_">getPaddingString</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">value</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="attr">padder</span>: <span class="title class_">Padder</span> = <span class="keyword">new</span> <span class="title class_">SpaceRepeatingPadder</span>(<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (padder <span class="keyword">instanceof</span> <span class="title class_">SpaceRepeatingPadder</span>) &#123;</span><br><span class="line">  <span class="comment">// padderçš„ç±»å‹æ”¶çª„ä¸º &#x27;SpaceRepeatingPadder&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="4-4-è‡ªå®šä¹‰ç±»å‹ä¿æŠ¤çš„ç±»å‹è°“è¯"><a href="#4-4-è‡ªå®šä¹‰ç±»å‹ä¿æŠ¤çš„ç±»å‹è°“è¯" class="headerlink" title="4.4 è‡ªå®šä¹‰ç±»å‹ä¿æŠ¤çš„ç±»å‹è°“è¯"></a>4.4 è‡ªå®šä¹‰ç±»å‹ä¿æŠ¤çš„ç±»å‹è°“è¯</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">isNumber</span>(<span class="params">x: <span class="built_in">any</span></span>): x is <span class="built_in">number</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> x === <span class="string">&#x27;number&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isString</span>(<span class="params">x: <span class="built_in">any</span></span>): x is <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">typeof</span> x === <span class="string">&#x27;string&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-è”åˆç±»å‹å’Œç±»å‹åˆ«å"><a href="#5-è”åˆç±»å‹å’Œç±»å‹åˆ«å" class="headerlink" title="5. è”åˆç±»å‹å’Œç±»å‹åˆ«å"></a>5. è”åˆç±»å‹å’Œç±»å‹åˆ«å</h2><h3 id="5-1-è”åˆç±»å‹"><a href="#5-1-è”åˆç±»å‹" class="headerlink" title="5.1 è”åˆç±»å‹"></a>5.1 è”åˆç±»å‹</h3><p>è”åˆç±»å‹é€šå¸¸ä¸ <code>null</code> æˆ– <code>undefined</code> ä¸€èµ·ä½¿ç”¨ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">sayHello</span> = (<span class="params">name: <span class="built_in">string</span> | <span class="literal">undefined</span></span>) =&gt; &#123;</span><br><span class="line">  <span class="comment">/* ... */</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¾‹å¦‚ï¼Œè¿™é‡Œ <code>name</code> çš„ç±»å‹æ˜¯ <code>string | undefined</code> æ„å‘³ç€å¯ä»¥å°† <code>string</code> æˆ– <code>undefined</code> çš„å€¼ä¼ é€’ç»™<code>sayHello</code> å‡½æ•°ã€‚</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="built_in">sayHello</span>(&quot;Semlinker&quot;);</span><br><span class="line"><span class="built_in">sayHello</span>(undefined);</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡è¿™ä¸ªç¤ºä¾‹ï¼Œä½ å¯ä»¥å‡­ç›´è§‰çŸ¥é“ç±»å‹ A å’Œç±»å‹ B è”åˆåçš„ç±»å‹æ˜¯åŒæ—¶æ¥å— A å’Œ B å€¼çš„ç±»å‹ã€‚</p>
<h3 id="5-2-å¯è¾¨è¯†è”åˆ"><a href="#5-2-å¯è¾¨è¯†è”åˆ" class="headerlink" title="5.2 å¯è¾¨è¯†è”åˆ"></a>5.2 å¯è¾¨è¯†è”åˆ</h3><p>TypeScript å¯è¾¨è¯†è”åˆï¼ˆDiscriminated Unionsï¼‰ç±»å‹ï¼Œä¹Ÿç§°ä¸ºä»£æ•°æ•°æ®ç±»å‹æˆ–æ ‡ç­¾è”åˆç±»å‹ã€‚<strong>å®ƒåŒ…å« 3 ä¸ªè¦ç‚¹ï¼šå¯è¾¨è¯†ã€è”åˆç±»å‹å’Œç±»å‹å®ˆå«ã€‚</strong></p>
<p>è¿™ç§ç±»å‹çš„æœ¬è´¨æ˜¯ç»“åˆè”åˆç±»å‹å’Œå­—é¢é‡ç±»å‹çš„ä¸€ç§ç±»å‹ä¿æŠ¤æ–¹æ³•ã€‚<strong>å¦‚æœä¸€ä¸ªç±»å‹æ˜¯å¤šä¸ªç±»å‹çš„è”åˆç±»å‹ï¼Œä¸”å¤šä¸ªç±»å‹å«æœ‰ä¸€ä¸ªå…¬å…±å±æ€§ï¼Œé‚£ä¹ˆå°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªå…¬å…±å±æ€§ï¼Œæ¥åˆ›å»ºä¸åŒçš„ç±»å‹ä¿æŠ¤åŒºå—ã€‚</strong></p>
<p><strong>1.å¯è¾¨è¯†</strong></p>
<p>å¯è¾¨è¯†è¦æ±‚è”åˆç±»å‹ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½å«æœ‰ä¸€ä¸ªå•ä¾‹ç±»å‹å±æ€§ï¼Œæ¯”å¦‚ï¼š</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line">enum CarTransmission &#123;</span><br><span class="line">  Automatic = <span class="number">200</span>,</span><br><span class="line">  Manual = <span class="number">300</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Motorcycle &#123;</span><br><span class="line">  vType: <span class="string">&quot;motorcycle&quot;</span>; <span class="comment">// discriminant</span></span><br><span class="line">  make: number; <span class="comment">// year</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Car &#123;</span><br><span class="line">  vType: <span class="string">&quot;car&quot;</span>; <span class="comment">// discriminant</span></span><br><span class="line">  transmission: CarTransmission</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">interface Truck &#123;</span><br><span class="line">  vType: <span class="string">&quot;truck&quot;</span>; <span class="comment">// discriminant</span></span><br><span class="line">  capacity: number; <span class="comment">// in tons</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«å®šä¹‰äº† <code>Motorcycle</code>ã€ <code>Car</code> å’Œ <code>Truck</code> ä¸‰ä¸ªæ¥å£ï¼Œåœ¨è¿™äº›æ¥å£ä¸­éƒ½åŒ…å«ä¸€ä¸ª <code>vType</code> å±æ€§ï¼Œè¯¥å±æ€§è¢«ç§°ä¸ºå¯è¾¨è¯†çš„å±æ€§ï¼Œè€Œå…¶å®ƒçš„å±æ€§åªè·Ÿç‰¹æ€§çš„æ¥å£ç›¸å…³ã€‚</p>
<p><strong>2.è”åˆç±»å‹</strong></p>
<p>åŸºäºå‰é¢å®šä¹‰äº†ä¸‰ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ª <code>Vehicle</code> è”åˆç±»å‹ï¼š</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">type <span class="attr">Vehicle</span> = Motorcycle | Car | Truck<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p>ç°åœ¨æˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ä½¿ç”¨ <code>Vehicle</code> è”åˆç±»å‹ï¼Œå¯¹äº <code>Vehicle</code> ç±»å‹çš„å˜é‡ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä¸åŒç±»å‹çš„è½¦è¾†ã€‚</p>
<p><strong>3.ç±»å‹å®ˆå«</strong></p>
<p>ä¸‹é¢æˆ‘ä»¬æ¥å®šä¹‰ä¸€ä¸ª <code>evaluatePrice</code> æ–¹æ³•ï¼Œè¯¥æ–¹æ³•ç”¨äºæ ¹æ®è½¦è¾†çš„ç±»å‹ã€å®¹é‡å’Œè¯„ä¼°å› å­æ¥è®¡ç®—ä»·æ ¼ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">const <span class="attr">EVALUATION_FACTOR</span> = Math.PI<span class="comment">;</span></span><br><span class="line">function evaluatePrice(vehicle: Vehicle) &#123;</span><br><span class="line">  return vehicle.capacity * EVALUATION_FACTOR<span class="comment">;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const myTruck: <span class="attr">Truck</span> = &#123; vType: <span class="string">&quot;truck&quot;</span>, capacity: <span class="number">9.5</span> &#125;<span class="comment">;</span></span><br><span class="line">evaluatePrice(myTruck)<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<p>å¯¹äºä»¥ä¸Šä»£ç ï¼ŒTypeScript ç¼–è¯‘å™¨å°†ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Property <span class="string">&#x27;capacity&#x27;</span> does not exist on <span class="built_in">type</span> <span class="string">&#x27;Vehicle&#x27;</span>.</span><br><span class="line">Property <span class="string">&#x27;capacity&#x27;</span> does not exist on <span class="built_in">type</span> <span class="string">&#x27;Motorcycle&#x27;</span>.</span><br></pre></td></tr></table></figure>

<p>åŸå› æ˜¯åœ¨ Motorcycle æ¥å£ä¸­ï¼Œå¹¶ä¸å­˜åœ¨ <code>capacity</code> å±æ€§ï¼Œè€Œå¯¹äº Car æ¥å£æ¥è¯´ï¼Œå®ƒä¹Ÿä¸å­˜åœ¨ <code>capacity</code> å±æ€§ã€‚é‚£ä¹ˆï¼Œç°åœ¨æˆ‘ä»¬åº”è¯¥å¦‚ä½•è§£å†³ä»¥ä¸Šé—®é¢˜å‘¢ï¼Ÿè¿™æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»å‹å®ˆå«ã€‚ä¸‹é¢æˆ‘ä»¬æ¥é‡æ„ä¸€ä¸‹å‰é¢å®šä¹‰çš„ <code>evaluatePrice</code> æ–¹æ³•ï¼Œé‡æ„åçš„ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">evaluatePrice</span>(<span class="params">vehicle: Vehicle</span>) &#123;</span><br><span class="line">  <span class="keyword">switch</span> (vehicle.<span class="property">vType</span>) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;car&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> vehicle.<span class="property">transmission</span> * <span class="variable constant_">EVALUATION_FACTOR</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;truck&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> vehicle.<span class="property">capacity</span> * <span class="variable constant_">EVALUATION_FACTOR</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;motorcycle&#x27;</span>:</span><br><span class="line">      <span class="keyword">return</span> vehicle.<span class="property">make</span> * <span class="variable constant_">EVALUATION_FACTOR</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>switch</code> å’Œ <code>case</code> è¿ç®—ç¬¦æ¥å®ç°ç±»å‹å®ˆå«ï¼Œä»è€Œç¡®ä¿åœ¨ <code>evaluatePrice</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°è®¿é—® <code>vehicle</code> å¯¹è±¡ä¸­çš„æ‰€åŒ…å«çš„å±æ€§ï¼Œæ¥æ­£ç¡®çš„è®¡ç®—è¯¥è½¦è¾†ç±»å‹æ‰€å¯¹åº”çš„ä»·æ ¼ã€‚</p>
<h3 id="5-3-ç±»å‹åˆ«å"><a href="#5-3-ç±»å‹åˆ«å" class="headerlink" title="5.3 ç±»å‹åˆ«å"></a>5.3 ç±»å‹åˆ«å</h3><p>ç±»å‹åˆ«åç”¨æ¥ç»™ä¸€ä¸ªç±»å‹èµ·ä¸ªæ–°åå­—ã€‚</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">type <span class="attr">Message</span> = string | string[]<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">let <span class="attr">greet</span> = (message: Message) =&gt; &#123;</span><br><span class="line">  // ...</span><br><span class="line">&#125;<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-äº¤å‰ç±»å‹"><a href="#6-äº¤å‰ç±»å‹" class="headerlink" title="6. äº¤å‰ç±»å‹"></a>6. äº¤å‰ç±»å‹</h2><p>TypeScript äº¤å‰ç±»å‹æ˜¯å°†å¤šä¸ªç±»å‹åˆå¹¶ä¸ºä¸€ä¸ªç±»å‹ã€‚ è¿™è®©æˆ‘ä»¬å¯ä»¥æŠŠç°æœ‰çš„å¤šç§ç±»å‹å åŠ åˆ°ä¸€èµ·æˆä¸ºä¸€ç§ç±»å‹ï¼Œå®ƒ<strong>åŒ…å«äº†æ‰€éœ€çš„æ‰€æœ‰ç±»å‹çš„ç‰¹æ€§</strong>ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">IPerson</span> &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IWorker</span> &#123;</span><br><span class="line">  <span class="attr">companyId</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IStaff</span> = <span class="title class_">IPerson</span> &amp; <span class="title class_">IWorker</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">staff</span>: <span class="title class_">IStaff</span> = &#123;</span><br><span class="line">  <span class="attr">id</span>: <span class="string">&#x27;E1006&#x27;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">33</span>,</span><br><span class="line">  <span class="attr">companyId</span>: <span class="string">&#x27;EFT&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">dir</span>(staff)</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆä¸º IPerson å’Œ IWorker ç±»å‹å®šä¹‰äº†ä¸åŒçš„æˆå‘˜ï¼Œç„¶åé€šè¿‡ <code>&amp;</code> è¿ç®—ç¬¦å®šä¹‰äº† IStaff äº¤å‰ç±»å‹ï¼Œæ‰€ä»¥è¯¥ç±»å‹åŒæ—¶æ‹¥æœ‰ IPerson å’Œ IWorker è¿™ä¸¤ç§ç±»å‹çš„æˆå‘˜ã€‚</p>
<h2 id="7-TypeScript-å‡½æ•°"><a href="#7-TypeScript-å‡½æ•°" class="headerlink" title="7. TypeScript å‡½æ•°"></a>7. TypeScript å‡½æ•°</h2><h3 id="7-1-TypeScript-å‡½æ•°ä¸-JavaScript-å‡½æ•°çš„åŒºåˆ«"><a href="#7-1-TypeScript-å‡½æ•°ä¸-JavaScript-å‡½æ•°çš„åŒºåˆ«" class="headerlink" title="7.1 TypeScript å‡½æ•°ä¸ JavaScript å‡½æ•°çš„åŒºåˆ«"></a>7.1 TypeScript å‡½æ•°ä¸ JavaScript å‡½æ•°çš„åŒºåˆ«</h3><table>
<thead>
<tr>
<th>TypeScript</th>
<th>JavaScript</th>
</tr>
</thead>
<tbody><tr>
<td>å«æœ‰ç±»å‹</td>
<td>æ— ç±»å‹</td>
</tr>
<tr>
<td>ç®­å¤´å‡½æ•°</td>
<td>ç®­å¤´å‡½æ•°ï¼ˆES2015ï¼‰</td>
</tr>
<tr>
<td>å‡½æ•°ç±»å‹</td>
<td>æ— å‡½æ•°ç±»å‹</td>
</tr>
<tr>
<td>å¿…å¡«å’Œå¯é€‰å‚æ•°</td>
<td>æ‰€æœ‰å‚æ•°éƒ½æ˜¯å¯é€‰çš„</td>
</tr>
<tr>
<td>é»˜è®¤å‚æ•°</td>
<td>é»˜è®¤å‚æ•°</td>
</tr>
<tr>
<td>å‰©ä½™å‚æ•°</td>
<td>å‰©ä½™å‚æ•°</td>
</tr>
<tr>
<td>å‡½æ•°é‡è½½</td>
<td>æ— å‡½æ•°é‡è½½</td>
</tr>
</tbody></table>
<h3 id="7-2-ç®­å¤´å‡½æ•°"><a href="#7-2-ç®­å¤´å‡½æ•°" class="headerlink" title="7.2 ç®­å¤´å‡½æ•°"></a>7.2 ç®­å¤´å‡½æ•°</h3><p><strong>1.å¸¸è§è¯­æ³•</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">myBooks.<span class="title function_">forEach</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;reading&#x27;</span>));</span><br><span class="line"></span><br><span class="line">myBooks.<span class="title function_">forEach</span>(<span class="function"><span class="params">title</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(title));</span><br><span class="line"></span><br><span class="line">myBooks.<span class="title function_">forEach</span>(<span class="function">(<span class="params">title, idx, arr</span>) =&gt;</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(idx + <span class="string">&#x27;-&#x27;</span> + title);</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">myBooks.<span class="title function_">forEach</span>(<span class="function">(<span class="params">title, idx, arr</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(idx + <span class="string">&#x27;-&#x27;</span> + title);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>2.ä½¿ç”¨ç¤ºä¾‹</strong></p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// æœªä½¿ç”¨ç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Book</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> self = <span class="variable language_">this</span></span><br><span class="line">  self.<span class="property">publishDate</span> = <span class="number">2016</span></span><br><span class="line">  <span class="built_in">setInterval</span>(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(self.<span class="property">publishDate</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ç®­å¤´å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Book</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">publishDate</span> = <span class="number">2016</span></span><br><span class="line">  <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">publishDate</span>)</span><br><span class="line">  &#125;, <span class="number">1000</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-3-å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹"><a href="#7-3-å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹" class="headerlink" title="7.3 å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹"></a>7.3 å‚æ•°ç±»å‹å’Œè¿”å›ç±»å‹</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">createUserId</span>(<span class="params">name: <span class="built_in">string</span>, id: <span class="built_in">number</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> name + id</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-4-å‡½æ•°ç±»å‹"><a href="#7-4-å‡½æ•°ç±»å‹" class="headerlink" title="7.4 å‡½æ•°ç±»å‹"></a>7.4 å‡½æ•°ç±»å‹</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜å‡½æ•°ç±»å‹ï¼Œç„¶åå†èµ‹å€¼</span></span><br><span class="line"><span class="keyword">let</span> <span class="title class_">IdGenerator</span>: <span class="function">(<span class="params">chars: <span class="built_in">string</span>, nums: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createUserId</span>(<span class="params">name: <span class="built_in">string</span>, id: <span class="built_in">number</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> name + id</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">IdGenerator</span> = createUserId</span><br></pre></td></tr></table></figure>

<h3 id="7-5-å¯é€‰å‚æ•°åŠé»˜è®¤å‚æ•°"><a href="#7-5-å¯é€‰å‚æ•°åŠé»˜è®¤å‚æ•°" class="headerlink" title="7.5 å¯é€‰å‚æ•°åŠé»˜è®¤å‚æ•°"></a>7.5 å¯é€‰å‚æ•°åŠé»˜è®¤å‚æ•°</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// å¯é€‰å‚æ•°ï¼šåŠ ä¸ªé—®å·å³å¯</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createUserId</span>(<span class="params">name: <span class="built_in">string</span>, id: <span class="built_in">number</span>, age?: <span class="built_in">number</span></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> name + id</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é»˜è®¤å‚æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">createUserId</span>(<span class="params"></span></span><br><span class="line"><span class="params">  name: <span class="built_in">string</span> = <span class="string">&#x27;Semlinker&#x27;</span>,</span></span><br><span class="line"><span class="params">  id: <span class="built_in">number</span>,</span></span><br><span class="line"><span class="params">  age?: <span class="built_in">number</span></span></span><br><span class="line"><span class="params"></span>): <span class="built_in">string</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> name + id</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨å£°æ˜å‡½æ•°æ—¶ï¼Œå¯ä»¥é€šè¿‡ <code>?</code> å·æ¥å®šä¹‰å¯é€‰å‚æ•°ï¼Œæ¯”å¦‚ <code>age?: number</code> è¿™ç§å½¢å¼ã€‚åœ¨å®é™…ä½¿ç”¨æ—¶ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å¯é€‰å‚æ•°è¦æ”¾åœ¨æ™®é€šå‚æ•°çš„åé¢ï¼Œä¸ç„¶ä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚</p>
<h3 id="7-6-å‰©ä½™å‚æ•°"><a href="#7-6-å‰©ä½™å‚æ•°" class="headerlink" title="7.6 å‰©ä½™å‚æ•°"></a>7.6 å‰©ä½™å‚æ•°</h3><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="comment">// åŠ ...è¡¨ç¤ºå‰©ä½™å‚æ•°</span></span><br><span class="line">function <span class="built_in">push</span>(array, ...items) &#123;</span><br><span class="line">  items<span class="selector-class">.forEach</span>(function (item) &#123;</span><br><span class="line">    array<span class="selector-class">.push</span>(item);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let <span class="selector-tag">a</span> = <span class="selector-attr">[]</span>;</span><br><span class="line"><span class="built_in">push</span>(a, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<h3 id="7-7-å‡½æ•°é‡è½½"><a href="#7-7-å‡½æ•°é‡è½½" class="headerlink" title="7.7 å‡½æ•°é‡è½½"></a>7.7 å‡½æ•°é‡è½½</h3><p>å‡½æ•°é‡è½½æˆ–æ–¹æ³•é‡è½½æ˜¯ä½¿ç”¨ç›¸åŒåç§°å’Œä¸åŒå‚æ•°æ•°é‡æˆ–ç±»å‹åˆ›å»ºå¤šä¸ªæ–¹æ³•çš„ä¸€ç§èƒ½åŠ›ã€‚è¦è§£å†³å‰é¢é‡åˆ°çš„é—®é¢˜ï¼Œæ–¹æ³•å°±æ˜¯ä¸ºåŒä¸€ä¸ªå‡½æ•°æä¾›å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰æ¥è¿›è¡Œå‡½æ•°é‡è½½ï¼Œç¼–è¯‘å™¨ä¼šæ ¹æ®è¿™ä¸ªåˆ—è¡¨å»å¤„ç†å‡½æ•°çš„è°ƒç”¨ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">number</span></span>): <span class="built_in">number</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">string</span></span>): <span class="built_in">string</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a: <span class="built_in">string</span>, b: <span class="built_in">number</span></span>): <span class="built_in">string</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a: <span class="built_in">number</span>, b: <span class="built_in">string</span></span>): <span class="built_in">string</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a: Combinable, b: Combinable</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> a === <span class="string">&#x27;string&#x27;</span> || <span class="keyword">typeof</span> b === <span class="string">&#x27;string&#x27;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> a.<span class="title function_">toString</span>() + b.<span class="title function_">toString</span>()</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸º add å‡½æ•°æä¾›äº†å¤šä¸ªå‡½æ•°ç±»å‹å®šä¹‰ï¼Œä»è€Œå®ç°å‡½æ•°çš„é‡è½½ã€‚ä¹‹åï¼Œå¯æ¶çš„é”™è¯¯æ¶ˆæ¯åˆæ¶ˆå¤±äº†ï¼Œå› ä¸ºè¿™æ—¶ result å˜é‡çš„ç±»å‹æ˜¯ <code>string</code> ç±»å‹ã€‚åœ¨ TypeScript ä¸­é™¤äº†å¯ä»¥é‡è½½æ™®é€šå‡½æ•°ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é‡è½½ç±»ä¸­çš„æˆå‘˜æ–¹æ³•ã€‚</p>
<p>æ–¹æ³•é‡è½½æ˜¯æŒ‡åœ¨åŒä¸€ä¸ªç±»ä¸­æ–¹æ³•åŒåï¼Œå‚æ•°ä¸åŒï¼ˆå‚æ•°ç±»å‹ä¸åŒã€å‚æ•°ä¸ªæ•°ä¸åŒæˆ–å‚æ•°ä¸ªæ•°ç›¸åŒæ—¶å‚æ•°çš„å…ˆåé¡ºåºä¸åŒï¼‰ï¼Œè°ƒç”¨æ—¶æ ¹æ®å®å‚çš„å½¢å¼ï¼Œé€‰æ‹©ä¸å®ƒåŒ¹é…çš„æ–¹æ³•æ‰§è¡Œæ“ä½œçš„ä¸€ç§æŠ€æœ¯ã€‚æ‰€ä»¥ç±»ä¸­æˆå‘˜æ–¹æ³•æ»¡è¶³é‡è½½çš„æ¡ä»¶æ˜¯ï¼šåœ¨åŒä¸€ä¸ªç±»ä¸­ï¼Œæ–¹æ³•åç›¸åŒä¸”å‚æ•°åˆ—è¡¨ä¸åŒã€‚ä¸‹é¢æˆ‘ä»¬æ¥ä¸¾ä¸€ä¸ªæˆå‘˜æ–¹æ³•é‡è½½çš„ä¾‹å­ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span> </span>&#123;</span><br><span class="line">  <span class="title function_ invoke__">add</span>(<span class="attr">a</span>: number, <span class="attr">b</span>: number): number;</span><br><span class="line">  <span class="title function_ invoke__">add</span>(<span class="attr">a</span>: <span class="keyword">string</span>, <span class="attr">b</span>: <span class="keyword">string</span>): <span class="keyword">string</span>;</span><br><span class="line">  <span class="title function_ invoke__">add</span>(<span class="attr">a</span>: <span class="keyword">string</span>, <span class="attr">b</span>: number): <span class="keyword">string</span>;</span><br><span class="line">  <span class="title function_ invoke__">add</span>(<span class="attr">a</span>: number, <span class="attr">b</span>: <span class="keyword">string</span>): <span class="keyword">string</span>;</span><br><span class="line">  <span class="title function_ invoke__">add</span>(<span class="attr">a</span>: Combinable, <span class="attr">b</span>: Combinable) &#123;</span><br><span class="line">    <span class="keyword">if</span> (typeof a === <span class="string">&quot;string&quot;</span> || typeof b === <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> a.<span class="title function_ invoke__">toString</span>() + b.<span class="title function_ invoke__">toString</span>();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> a + b;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">calculator</span> = <span class="keyword">new</span> <span class="title class_">Calculator</span>();</span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">result</span> = calculator.<span class="title function_ invoke__">add</span>(<span class="string">&quot;Semlinker&quot;</span>, <span class="string">&quot; Kakuqo&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“ TypeScript ç¼–è¯‘å™¨å¤„ç†å‡½æ•°é‡è½½æ—¶ï¼Œå®ƒä¼šæŸ¥æ‰¾é‡è½½åˆ—è¡¨ï¼Œå°è¯•ä½¿ç”¨ç¬¬ä¸€ä¸ªé‡è½½å®šä¹‰ã€‚ å¦‚æœåŒ¹é…çš„è¯å°±ä½¿ç”¨è¿™ä¸ªã€‚ å› æ­¤ï¼Œåœ¨å®šä¹‰é‡è½½çš„æ—¶å€™ï¼Œä¸€å®šè¦æŠŠæœ€ç²¾ç¡®çš„å®šä¹‰æ”¾åœ¨æœ€å‰é¢ã€‚å¦å¤–åœ¨ Calculator ç±»ä¸­ï¼Œ<code>add(a: Combinable, b: Combinable)&#123; &#125;</code> å¹¶ä¸æ˜¯é‡è½½åˆ—è¡¨çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å¯¹äº add æˆå‘˜æ–¹æ³•æ¥è¯´ï¼Œæˆ‘ä»¬åªå®šä¹‰äº†å››ä¸ªé‡è½½æ–¹æ³•ã€‚</p>
<h2 id="8-TypeScript-æ•°ç»„"><a href="#8-TypeScript-æ•°ç»„" class="headerlink" title="8. TypeScript æ•°ç»„"></a>8. TypeScript æ•°ç»„</h2><h3 id="8-1-æ•°ç»„è§£æ„"><a href="#8-1-æ•°ç»„è§£æ„" class="headerlink" title="8.1 æ•°ç»„è§£æ„"></a>8.1 æ•°ç»„è§£æ„</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">x</span>: <span class="built_in">number</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">y</span>: <span class="built_in">number</span></span><br><span class="line"><span class="keyword">let</span> <span class="attr">z</span>: <span class="built_in">number</span></span><br><span class="line"><span class="keyword">let</span> five_array = [<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line">;[x, y, z] = five_array</span><br></pre></td></tr></table></figure>

<h3 id="8-2-æ•°ç»„å±•å¼€è¿ç®—ç¬¦"><a href="#8-2-æ•°ç»„å±•å¼€è¿ç®—ç¬¦" class="headerlink" title="8.2 æ•°ç»„å±•å¼€è¿ç®—ç¬¦"></a>8.2 æ•°ç»„å±•å¼€è¿ç®—ç¬¦</h3><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">let <span class="attr">two_array</span> = [<span class="number">0</span>, <span class="number">1</span>]<span class="comment">;</span></span><br><span class="line">let <span class="attr">five_array</span> = [...two_array, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<h3 id="8-3-æ•°ç»„éå†"><a href="#8-3-æ•°ç»„éå†" class="headerlink" title="8.3 æ•°ç»„éå†"></a>8.3 æ•°ç»„éå†</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="attr">colors</span>: <span class="built_in">string</span>[] = [<span class="string">&#x27;red&#x27;</span>, <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;blue&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i <span class="keyword">of</span> colors) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-TypeScript-å¯¹è±¡"><a href="#9-TypeScript-å¯¹è±¡" class="headerlink" title="9. TypeScript å¯¹è±¡"></a>9. TypeScript å¯¹è±¡</h2><h3 id="9-1-å¯¹è±¡è§£æ„"><a href="#9-1-å¯¹è±¡è§£æ„" class="headerlink" title="9.1 å¯¹è±¡è§£æ„"></a>9.1 å¯¹è±¡è§£æ„</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">let</span> person = &#123;</span><br><span class="line">  name: <span class="string">&quot;Semlinker&quot;</span>,</span><br><span class="line">  gender: <span class="string">&quot;Male&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">let</span> &#123; name, gender &#125; = person;</span><br></pre></td></tr></table></figure>

<h3 id="9-2-å¯¹è±¡å±•å¼€è¿ç®—ç¬¦"><a href="#9-2-å¯¹è±¡å±•å¼€è¿ç®—ç¬¦" class="headerlink" title="9.2 å¯¹è±¡å±•å¼€è¿ç®—ç¬¦"></a>9.2 å¯¹è±¡å±•å¼€è¿ç®—ç¬¦</h3><figure class="highlight csharp"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  name: <span class="string">&quot;Semlinker&quot;</span>,</span><br><span class="line">  gender: <span class="string">&quot;Male&quot;</span>,</span><br><span class="line">  address: <span class="string">&quot;Xiamen&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»„è£…å¯¹è±¡</span></span><br><span class="line"><span class="keyword">let</span> personWithAge = &#123; ...person, age: <span class="number">33</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è·å–é™¤äº†æŸäº›é¡¹å¤–çš„å…¶å®ƒé¡¹</span></span><br><span class="line"><span class="keyword">let</span> &#123; name, ...rest &#125; = person;</span><br></pre></td></tr></table></figure>

<h2 id="10-TypeScript-æ¥å£"><a href="#10-TypeScript-æ¥å£" class="headerlink" title="10. TypeScript æ¥å£"></a>10. TypeScript æ¥å£</h2><p>åœ¨é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œæ¥å£æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼Œå®ƒæ˜¯å¯¹è¡Œä¸ºçš„æŠ½è±¡ï¼Œè€Œå…·ä½“å¦‚ä½•è¡ŒåŠ¨éœ€è¦ç”±ç±»å»å®ç°ã€‚</p>
<p>TypeScript ä¸­çš„æ¥å£æ˜¯ä¸€ä¸ªéå¸¸çµæ´»çš„æ¦‚å¿µï¼Œé™¤äº†å¯ç”¨äº<a href="https://link.juejin.cn/?target=https://ts.xcatliu.com/advanced/class-and-interfaces.html%23%E7%B1%BB%E5%AE%9E%E7%8E%B0%E6%8E%A5%E5%8F%A3">å¯¹ç±»çš„ä¸€éƒ¨åˆ†è¡Œä¸ºè¿›è¡ŒæŠ½è±¡</a>ä»¥å¤–ï¼Œä¹Ÿå¸¸ç”¨äºå¯¹ã€Œå¯¹è±¡çš„å½¢çŠ¶ï¼ˆShapeï¼‰ã€è¿›è¡Œæè¿°ã€‚</p>
<h3 id="10-1-å¯¹è±¡çš„å½¢çŠ¶"><a href="#10-1-å¯¹è±¡çš„å½¢çŠ¶" class="headerlink" title="10.1 å¯¹è±¡çš„å½¢çŠ¶"></a>10.1 å¯¹è±¡çš„å½¢çŠ¶</h3><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">  name: string;</span><br><span class="line">  age: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let Semlinker: Person = &#123;</span><br><span class="line">  name: <span class="string">&quot;Semlinker&quot;</span>,</span><br><span class="line">  age: <span class="number">33</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="10-2-å¯é€‰-åªè¯»å±æ€§"><a href="#10-2-å¯é€‰-åªè¯»å±æ€§" class="headerlink" title="10.2 å¯é€‰ | åªè¯»å±æ€§"></a>10.2 å¯é€‰ | åªè¯»å±æ€§</h3><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="keyword">readonly</span> <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  age?: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åªè¯»å±æ€§ç”¨äºé™åˆ¶åªèƒ½åœ¨<strong>å¯¹è±¡åˆšåˆšåˆ›å»ºçš„æ—¶å€™ä¿®æ”¹å…¶å€¼</strong>ã€‚æ­¤å¤– TypeScript è¿˜æä¾›äº† <code>ReadonlyArray&lt;T&gt;</code> ç±»å‹ï¼Œå®ƒä¸ <code>Array&lt;T&gt;</code> ç›¸ä¼¼ï¼Œåªæ˜¯æŠŠæ‰€æœ‰å¯å˜æ–¹æ³•å»æ‰äº†ï¼Œå› æ­¤å¯ä»¥ç¡®ä¿æ•°ç»„åˆ›å»ºåå†ä¹Ÿä¸èƒ½è¢«ä¿®æ”¹ã€‚</p>
<figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">let a: number<span class="section">[]</span> = <span class="section">[1, 2, 3, 4]</span><span class="comment">;</span></span><br><span class="line">let ro: ReadonlyArray&lt;number&gt; = a<span class="comment">;</span></span><br><span class="line">ro<span class="section">[0]</span> = 12<span class="comment">; // error!</span></span><br><span class="line">ro.push(5)<span class="comment">; // error!</span></span><br><span class="line"><span class="attr">ro.length</span> = <span class="number">100</span><span class="comment">; // error!</span></span><br><span class="line"><span class="attr">a</span> = ro<span class="comment">; // error!</span></span><br></pre></td></tr></table></figure>

<h2 id="11-TypeScript-ç±»"><a href="#11-TypeScript-ç±»" class="headerlink" title="11. TypeScript ç±»"></a>11. TypeScript ç±»</h2><h3 id="11-1-ç±»çš„å±æ€§ä¸æ–¹æ³•"><a href="#11-1-ç±»çš„å±æ€§ä¸æ–¹æ³•" class="headerlink" title="11.1 ç±»çš„å±æ€§ä¸æ–¹æ³•"></a>11.1 ç±»çš„å±æ€§ä¸æ–¹æ³•</h3><p>åœ¨é¢å‘å¯¹è±¡è¯­è¨€ä¸­ï¼Œç±»æ˜¯ä¸€ç§é¢å‘å¯¹è±¡è®¡ç®—æœºç¼–ç¨‹è¯­è¨€çš„æ„é€ ï¼Œæ˜¯åˆ›å»ºå¯¹è±¡çš„è“å›¾ï¼Œæè¿°äº†æ‰€åˆ›å»ºçš„å¯¹è±¡å…±åŒçš„å±æ€§å’Œæ–¹æ³•ã€‚</p>
<p>åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>Class</code> å…³é”®å­—æ¥å®šä¹‰ä¸€ä¸ªç±»ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Greeter</span> &#123;</span><br><span class="line">  <span class="comment">// é™æ€å±æ€§</span></span><br><span class="line">  <span class="keyword">static</span> <span class="attr">cname</span>: <span class="built_in">string</span> = <span class="string">&#x27;Greeter&#x27;</span></span><br><span class="line">  <span class="comment">// æˆå‘˜å±æ€§</span></span><br><span class="line">  <span class="attr">greeting</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ„é€ å‡½æ•° - æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">message: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">greeting</span> = message</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">getClassName</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Class name is Greeter&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æˆå‘˜æ–¹æ³•</span></span><br><span class="line">  <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello, &#x27;</span> + <span class="variable language_">this</span>.<span class="property">greeting</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> greeter = <span class="keyword">new</span> <span class="title class_">Greeter</span>(<span class="string">&#x27;world&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>é‚£ä¹ˆæˆå‘˜å±æ€§ä¸é™æ€å±æ€§ï¼Œæˆå‘˜æ–¹æ³•ä¸é™æ€æ–¹æ³•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿè¿™é‡Œæ— éœ€è¿‡å¤šè§£é‡Šï¼Œæˆ‘ä»¬ç›´æ¥çœ‹ä¸€ä¸‹ä»¥ä¸‹ç¼–è¯‘ç”Ÿæˆçš„ ES5 ä»£ç ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Greeter</span> = <span class="comment">/** <span class="doctag">@class</span> */</span> (<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// æ„é€ å‡½æ•° - æ‰§è¡Œåˆå§‹åŒ–æ“ä½œ</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">Greeter</span>(<span class="params">message</span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">greeting</span> = message</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é™æ€æ–¹æ³•</span></span><br><span class="line">  <span class="title class_">Greeter</span>.<span class="property">getClassName</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Class name is Greeter&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// æˆå‘˜æ–¹æ³•</span></span><br><span class="line">  <span class="title class_">Greeter</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">greet</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;Hello, &#x27;</span> + <span class="variable language_">this</span>.<span class="property">greeting</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// é™æ€å±æ€§</span></span><br><span class="line">  <span class="title class_">Greeter</span>.<span class="property">cname</span> = <span class="string">&#x27;Greeter&#x27;</span></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Greeter</span></span><br><span class="line">&#125;)()</span><br><span class="line"><span class="keyword">var</span> greeter = <span class="keyword">new</span> <span class="title class_">Greeter</span>(<span class="string">&#x27;world&#x27;</span>)</span><br><span class="line">å¤åˆ¶ä»£ç </span><br></pre></td></tr></table></figure>

<h3 id="11-2-è®¿é—®å™¨"><a href="#11-2-è®¿é—®å™¨" class="headerlink" title="11.2 è®¿é—®å™¨"></a>11.2 è®¿é—®å™¨</h3><p>åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>getter</code> å’Œ <code>setter</code> æ–¹æ³•æ¥å®ç°æ•°æ®çš„å°è£…å’Œæœ‰æ•ˆæ€§æ ¡éªŒï¼Œé˜²æ­¢å‡ºç°å¼‚å¸¸æ•°æ®ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> passcode = <span class="string">&#x27;Hello TypeScript&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="attr">_fullName</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">get</span> <span class="title function_">fullName</span>(): <span class="built_in">string</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_fullName</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">set</span> <span class="title function_">fullName</span>(<span class="params">newName: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (passcode &amp;&amp; passcode == <span class="string">&#x27;Hello TypeScript&#x27;</span>) &#123;</span><br><span class="line">      <span class="variable language_">this</span>.<span class="property">_fullName</span> = newName</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Error: Unauthorized update of employee!&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> employee = <span class="keyword">new</span> <span class="title class_">Employee</span>()</span><br><span class="line">employee.<span class="property">fullName</span> = <span class="string">&#x27;Semlinker&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (employee.<span class="property">fullName</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(employee.<span class="property">fullName</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="11-3-ç±»çš„ç»§æ‰¿"><a href="#11-3-ç±»çš„ç»§æ‰¿" class="headerlink" title="11.3 ç±»çš„ç»§æ‰¿"></a>11.3 ç±»çš„ç»§æ‰¿</h3><p>ç»§æ‰¿ (Inheritance) æ˜¯ä¸€ç§è”ç»“ç±»ä¸ç±»çš„å±‚æ¬¡æ¨¡å‹ã€‚æŒ‡çš„æ˜¯ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºå­ç±»ã€å­æ¥å£ï¼‰ç»§æ‰¿å¦å¤–çš„ä¸€ä¸ªç±»ï¼ˆç§°ä¸ºçˆ¶ç±»ã€çˆ¶æ¥å£ï¼‰çš„åŠŸèƒ½ï¼Œå¹¶å¯ä»¥å¢åŠ å®ƒè‡ªå·±çš„æ–°åŠŸèƒ½çš„èƒ½åŠ›ï¼Œç»§æ‰¿æ˜¯ç±»ä¸ç±»æˆ–è€…æ¥å£ä¸æ¥å£ä¹‹é—´æœ€å¸¸è§çš„å…³ç³»ã€‚</p>
<p>ç»§æ‰¿æ˜¯ä¸€ç§ <a href="https://link.juejin.cn/?target=https://zh.wikipedia.org/wiki/Is-a">is-a </a>å…³ç³»ï¼š</p>
<p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/6/8/172916651d29ba48~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p>
<p>åœ¨ TypeScript ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>extends</code> å…³é”®å­—æ¥å®ç°ç»§æ‰¿ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Animal</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">theName: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">name</span> = theName</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">move</span>(<span class="params">distanceInMeters: <span class="built_in">number</span> = <span class="number">0</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`<span class="subst">$&#123;<span class="variable language_">this</span>.name&#125;</span> moved <span class="subst">$&#123;distanceInMeters&#125;</span>m.`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Snake</span> <span class="keyword">extends</span> <span class="title class_ inherited__">Animal</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(name)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">move</span>(<span class="params">distanceInMeters = <span class="number">5</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Slithering...&#x27;</span>)</span><br><span class="line">    <span class="variable language_">super</span>.<span class="title function_">move</span>(distanceInMeters)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sam = <span class="keyword">new</span> <span class="title class_">Snake</span>(<span class="string">&#x27;Sammy the Python&#x27;</span>)</span><br><span class="line">sam.<span class="title function_">move</span>()</span><br></pre></td></tr></table></figure>

<h3 id="11-4-ECMAScript-ç§æœ‰å­—æ®µ"><a href="#11-4-ECMAScript-ç§æœ‰å­—æ®µ" class="headerlink" title="11.4 ECMAScript ç§æœ‰å­—æ®µ"></a>11.4 ECMAScript ç§æœ‰å­—æ®µ</h3><p>åœ¨ TypeScript 3.8 ç‰ˆæœ¬å°±å¼€å§‹æ”¯æŒ<strong>ECMAScript ç§æœ‰å­—æ®µ</strong>ï¼Œä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  #<span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>) &#123;</span><br><span class="line">    <span class="variable language_">this</span>.#name = name</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">greet</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">`Hello, my name is <span class="subst">$&#123;<span class="variable language_">this</span>.#name&#125;</span>!`</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> semlinker = <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="string">&#x27;Semlinker&#x27;</span>)</span><br><span class="line"></span><br><span class="line">semlinker.#name</span><br><span class="line"><span class="comment">//     ~~~~~</span></span><br><span class="line"><span class="comment">// Property &#x27;#name&#x27; is not accessible outside class &#x27;Person&#x27;</span></span><br><span class="line"><span class="comment">// because it has a private identifier.</span></span><br></pre></td></tr></table></figure>

<p>ä¸å¸¸è§„å±æ€§ï¼ˆç”šè‡³ä½¿ç”¨ <code>private</code> ä¿®é¥°ç¬¦å£°æ˜çš„å±æ€§ï¼‰ä¸åŒï¼Œç§æœ‰å­—æ®µè¦ç‰¢è®°ä»¥ä¸‹è§„åˆ™ï¼š</p>
<ul>
<li>ç§æœ‰å­—æ®µä»¥ <code>#</code> å­—ç¬¦å¼€å¤´ï¼Œæœ‰æ—¶æˆ‘ä»¬ç§°ä¹‹ä¸ºç§æœ‰åç§°ï¼›</li>
<li>æ¯ä¸ªç§æœ‰å­—æ®µåç§°éƒ½å”¯ä¸€åœ°é™å®šäºå…¶åŒ…å«çš„ç±»ï¼›</li>
<li>ä¸èƒ½åœ¨ç§æœ‰å­—æ®µä¸Šä½¿ç”¨ TypeScript å¯è®¿é—®æ€§ä¿®é¥°ç¬¦ï¼ˆå¦‚ public æˆ– privateï¼‰ï¼›</li>
<li>ç§æœ‰å­—æ®µä¸èƒ½åœ¨åŒ…å«çš„ç±»ä¹‹å¤–è®¿é—®ï¼Œç”šè‡³ä¸èƒ½è¢«æ£€æµ‹åˆ°ã€‚</li>
</ul>
<h2 id="12-TypeScript-æ³›å‹"><a href="#12-TypeScript-æ³›å‹" class="headerlink" title="12. TypeScript æ³›å‹"></a>12. TypeScript æ³›å‹</h2><p>è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä¸ä»…è¦åˆ›å»ºä¸€è‡´çš„å®šä¹‰è‰¯å¥½çš„ APIï¼ŒåŒæ—¶ä¹Ÿè¦è€ƒè™‘å¯é‡ç”¨æ€§ã€‚ ç»„ä»¶ä¸ä»…èƒ½å¤Ÿæ”¯æŒå½“å‰çš„æ•°æ®ç±»å‹ï¼ŒåŒæ—¶ä¹Ÿèƒ½æ”¯æŒæœªæ¥çš„æ•°æ®ç±»å‹ï¼Œè¿™åœ¨åˆ›å»ºå¤§å‹ç³»ç»Ÿæ—¶ä¸ºä½ æä¾›äº†ååˆ†çµæ´»çš„åŠŸèƒ½ã€‚</p>
<p><strong>åœ¨åƒ C# å’Œ Java è¿™æ ·çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯é‡ç”¨çš„ç»„ä»¶ï¼Œä¸€ä¸ªç»„ä»¶å¯ä»¥æ”¯æŒå¤šç§ç±»å‹çš„æ•°æ®ã€‚ è¿™æ ·ç”¨æˆ·å°±å¯ä»¥ä»¥è‡ªå·±çš„æ•°æ®ç±»å‹æ¥ä½¿ç”¨ç»„ä»¶ã€‚</strong></p>
<p>è®¾è®¡æ³›å‹çš„å…³é”®ç›®çš„æ˜¯åœ¨æˆå‘˜ä¹‹é—´æä¾›æœ‰æ„ä¹‰çš„çº¦æŸï¼Œè¿™äº›æˆå‘˜å¯ä»¥æ˜¯ï¼šç±»çš„å®ä¾‹æˆå‘˜ã€ç±»çš„æ–¹æ³•ã€å‡½æ•°å‚æ•°å’Œå‡½æ•°è¿”å›å€¼ã€‚</p>
<p>æ³›å‹ï¼ˆGenericsï¼‰æ˜¯å…è®¸åŒä¸€ä¸ªå‡½æ•°æ¥å—ä¸åŒç±»å‹å‚æ•°çš„ä¸€ç§æ¨¡æ¿ã€‚ç›¸æ¯”äºä½¿ç”¨ any ç±»å‹ï¼Œä½¿ç”¨æ³›å‹æ¥åˆ›å»ºå¯å¤ç”¨çš„ç»„ä»¶è¦æ›´å¥½ï¼Œå› ä¸ºæ³›å‹ä¼šä¿ç•™å‚æ•°ç±»å‹ã€‚</p>
<h3 id="12-1-æ³›å‹æ¥å£"><a href="#12-1-æ³›å‹æ¥å£" class="headerlink" title="12.1 æ³›å‹æ¥å£"></a>12.1 æ³›å‹æ¥å£</h3><figure class="highlight r"><table><tr><td class="code"><pre><span class="line">interface GenericIdentityFn<span class="operator">&lt;</span><span class="built_in">T</span><span class="operator">&gt;</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="punctuation">(</span>arg<span class="operator">:</span> <span class="built_in">T</span><span class="punctuation">)</span><span class="operator">:</span> <span class="built_in">T</span>;</span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="12-2-æ³›å‹ç±»"><a href="#12-2-æ³›å‹ç±»" class="headerlink" title="12.2 æ³›å‹ç±»"></a>12.2 æ³›å‹ç±»</h3><figure class="highlight ini"><table><tr><td class="code"><pre><span class="line">class GenericNumber&lt;T&gt; &#123;</span><br><span class="line">  zeroValue: T<span class="comment">;</span></span><br><span class="line">  add: (x: T, y: T) =&gt; T<span class="comment">;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let <span class="attr">myGenericNumber</span> = new GenericNumber&lt;number&gt;()<span class="comment">;</span></span><br><span class="line"><span class="attr">myGenericNumber.zeroValue</span> = <span class="number">0</span><span class="comment">;</span></span><br><span class="line"><span class="attr">myGenericNumber.add</span> = function (x, y) &#123;</span><br><span class="line">  return x + y<span class="comment">;</span></span><br><span class="line">&#125;<span class="comment">;</span></span><br></pre></td></tr></table></figure>

<h3 id="12-3-æ³›å‹å˜é‡"><a href="#12-3-æ³›å‹å˜é‡" class="headerlink" title="12.3 æ³›å‹å˜é‡"></a>12.3 æ³›å‹å˜é‡</h3><p>å¯¹åˆšæ¥è§¦ TypeScript æ³›å‹çš„å°ä¼™ä¼´æ¥è¯´ï¼Œçœ‹åˆ° T å’Œ Eï¼Œè¿˜æœ‰ K å’Œ V è¿™äº›æ³›å‹å˜é‡æ—¶ï¼Œä¼°è®¡ä¼šä¸€è„¸æ‡µé€¼ã€‚å…¶å®è¿™äº›å¤§å†™å­—æ¯å¹¶æ²¡æœ‰ä»€ä¹ˆæœ¬è´¨çš„åŒºåˆ«ï¼Œåªä¸è¿‡æ˜¯ä¸€ä¸ªçº¦å®šå¥½çš„è§„èŒƒè€Œå·²ã€‚ä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨å¤§å†™å­—æ¯ A-Z å®šä¹‰çš„ç±»å‹å˜é‡éƒ½å±äºæ³›å‹ï¼ŒæŠŠ T æ¢æˆ Aï¼Œä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚ä¸‹é¢æˆ‘ä»¬ä»‹ç»ä¸€ä¸‹ä¸€äº›å¸¸è§æ³›å‹å˜é‡ä»£è¡¨çš„æ„æ€ï¼š</p>
<ul>
<li>Tï¼ˆTypeï¼‰ï¼šè¡¨ç¤ºä¸€ä¸ª TypeScript ç±»å‹</li>
<li>Kï¼ˆKeyï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„é”®ç±»å‹</li>
<li>Vï¼ˆValueï¼‰ï¼šè¡¨ç¤ºå¯¹è±¡ä¸­çš„å€¼ç±»å‹</li>
<li>Eï¼ˆElementï¼‰ï¼šè¡¨ç¤ºå…ƒç´ ç±»å‹</li>
</ul>
<h3 id="12-4-æ³›å‹å·¥å…·ç±»å‹"><a href="#12-4-æ³›å‹å·¥å…·ç±»å‹" class="headerlink" title="12.4 æ³›å‹å·¥å…·ç±»å‹"></a>12.4 æ³›å‹å·¥å…·ç±»å‹</h3><p>ä¸ºäº†æ–¹ä¾¿å¼€å‘è€… TypeScript å†…ç½®äº†ä¸€äº›å¸¸ç”¨çš„å·¥å…·ç±»å‹ï¼Œæ¯”å¦‚ Partialã€Requiredã€Readonlyã€Record å’Œ ReturnType ç­‰ã€‚å‡ºäºç¯‡å¹…è€ƒè™‘ï¼Œè¿™é‡Œæˆ‘ä»¬åªç®€å•ä»‹ç» Partial å·¥å…·ç±»å‹ã€‚ä¸è¿‡åœ¨å…·ä½“ä»‹ç»ä¹‹å‰ï¼Œæˆ‘ä»¬å¾—å…ˆä»‹ç»ä¸€äº›ç›¸å…³çš„åŸºç¡€çŸ¥è¯†ï¼Œæ–¹ä¾¿è¯»è€…è‡ªè¡Œå­¦ä¹ å…¶å®ƒçš„å·¥å…·ç±»å‹ã€‚</p>
<h4 id="1-typeof"><a href="#1-typeof" class="headerlink" title="1.typeof"></a><strong>1.typeof</strong></h4><p>åœ¨ TypeScript ä¸­ï¼Œ<code>typeof</code> æ“ä½œç¬¦å¯ä»¥ç”¨æ¥è·å–ä¸€ä¸ªå˜é‡å£°æ˜æˆ–å¯¹è±¡çš„ç±»å‹ã€‚</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Person</span> &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">sem</span>: <span class="title class_">Person</span> = &#123; <span class="attr">name</span>: <span class="string">&#x27;semlinker&#x27;</span>, <span class="attr">age</span>: <span class="number">30</span> &#125;</span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Sem</span> = <span class="keyword">typeof</span> sem <span class="comment">// -&gt; Person</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">toArray</span>(<span class="params">x: <span class="built_in">number</span></span>): <span class="title class_">Array</span>&lt;<span class="built_in">number</span>&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> [x]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">Func</span> = <span class="keyword">typeof</span> toArray <span class="comment">// -&gt; (x: number) =&gt; number[]</span></span><br></pre></td></tr></table></figure>

<h4 id="2-keyof"><a href="#2-keyof" class="headerlink" title="2.keyof"></a><strong>2.keyof</strong></h4><p><code>keyof</code> æ“ä½œç¬¦å¯ä»¥ç”¨æ¥ä¸€ä¸ªå¯¹è±¡ä¸­çš„æ‰€æœ‰ key å€¼ï¼š</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">interface Person &#123;</span><br><span class="line">    name: <span class="built_in">string</span>;</span><br><span class="line">    age: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">type</span> K1 = keyof Person; // <span class="string">&quot;name&quot;</span> | <span class="string">&quot;age&quot;</span></span><br><span class="line"><span class="built_in">type</span> K2 = keyof Person[]; // <span class="string">&quot;length&quot;</span> | <span class="string">&quot;toString&quot;</span> | <span class="string">&quot;pop&quot;</span> | <span class="string">&quot;push&quot;</span> | <span class="string">&quot;concat&quot;</span> | <span class="string">&quot;join&quot;</span></span><br><span class="line"><span class="built_in">type</span> K3 = keyof &#123; [x: <span class="built_in">string</span>]: Person &#125;;  // <span class="built_in">string</span> | number</span><br></pre></td></tr></table></figure>

<h4 id="3-in"><a href="#3-in" class="headerlink" title="3.in"></a><strong>3.in</strong></h4><p><code>in</code> ç”¨æ¥éå†æšä¸¾ç±»å‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">type</span> Keys = <span class="string">&quot;a&quot;</span> | <span class="string">&quot;b&quot;</span> | <span class="string">&quot;c&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">type</span> Obj =  &#123;</span><br><span class="line">  [p <span class="keyword">in</span> Keys]: <span class="built_in">any</span></span><br><span class="line">&#125; // -&gt; &#123; a: <span class="built_in">any</span>, b: <span class="built_in">any</span>, c: <span class="built_in">any</span> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="4-infer"><a href="#4-infer" class="headerlink" title="4.infer"></a><strong>4.infer</strong></h4><p>åœ¨æ¡ä»¶ç±»å‹è¯­å¥ä¸­ï¼Œå¯ä»¥ç”¨ <code>infer</code> å£°æ˜ä¸€ä¸ªç±»å‹å˜é‡å¹¶ä¸”å¯¹å®ƒè¿›è¡Œä½¿ç”¨ã€‚</p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line">type ReturnType<span class="operator">&lt;</span><span class="built_in">T</span><span class="operator">&gt;</span> <span class="operator">=</span> <span class="built_in">T</span> extends <span class="punctuation">(</span></span><br><span class="line">  ...args<span class="operator">:</span> <span class="built_in">any</span><span class="punctuation">[</span><span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">)</span> <span class="operator">=</span><span class="operator">&gt;</span> infer R <span class="operator">?</span> R <span class="operator">:</span> <span class="built_in">any</span>;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šä»£ç ä¸­ <code>infer R</code> å°±æ˜¯å£°æ˜ä¸€ä¸ªå˜é‡æ¥æ‰¿è½½ä¼ å…¥å‡½æ•°ç­¾åçš„è¿”å›å€¼ç±»å‹ï¼Œç®€å•è¯´å°±æ˜¯ç”¨å®ƒå–åˆ°å‡½æ•°è¿”å›å€¼çš„ç±»å‹æ–¹ä¾¿ä¹‹åä½¿ç”¨ã€‚</p>
<p><strong>5.extends</strong></p>
<p>æœ‰æ—¶å€™æˆ‘ä»¬å®šä¹‰çš„æ³›å‹ä¸æƒ³è¿‡äºçµæ´»æˆ–è€…è¯´æƒ³ç»§æ‰¿æŸäº›ç±»ç­‰ï¼Œå¯ä»¥é€šè¿‡ extends å…³é”®å­—æ·»åŠ æ³›å‹çº¦æŸã€‚</p>
<figure class="highlight lua"><table><tr><td class="code"><pre><span class="line">interface ILengthwise &#123;</span><br><span class="line">  length: number;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loggingIdentity</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">ILengthwise</span>&gt;<span class="params">(arg: T)</span></span>: T &#123;</span><br><span class="line">  console.<span class="built_in">log</span>(<span class="built_in">arg</span>.length);</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">arg</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨è¿™ä¸ªæ³›å‹å‡½æ•°è¢«å®šä¹‰äº†çº¦æŸï¼Œå› æ­¤å®ƒä¸å†æ˜¯é€‚ç”¨äºä»»æ„ç±»å‹ï¼š</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="built_in">loggingIdentity</span>(<span class="number">3</span>);  <span class="comment">// Error, number doesn&#x27;t have a .length property</span></span><br></pre></td></tr></table></figure>

<p>è¿™æ—¶æˆ‘ä»¬éœ€è¦ä¼ å…¥ç¬¦åˆçº¦æŸç±»å‹çš„å€¼ï¼Œå¿…é¡»åŒ…å«å¿…é¡»çš„å±æ€§ï¼š</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="title function_ invoke__">loggingIdentity</span>(&#123;<span class="attr">length</span>: <span class="number">10</span>, <span class="attr">value</span>: <span class="number">3</span>&#125;);</span><br></pre></td></tr></table></figure>

<p><strong>6.Partial</strong></p>
<p><code>Partial&lt;T&gt;</code> çš„ä½œç”¨å°±æ˜¯å°†æŸä¸ªç±»å‹é‡Œçš„å±æ€§å…¨éƒ¨å˜ä¸ºå¯é€‰é¡¹ <code>?</code>ã€‚</p>
<p><strong>å®šä¹‰ï¼š</strong></p>
<figure class="highlight r"><table><tr><td class="code"><pre><span class="line"><span class="operator">/</span><span class="operator">*</span><span class="operator">*</span></span><br><span class="line"> <span class="operator">*</span> node_modules<span class="operator">/</span>typescript<span class="operator">/</span>lib<span class="operator">/</span>lib.es5.d.ts</span><br><span class="line"> <span class="operator">*</span> Make <span class="built_in">all</span> properties <span class="keyword">in</span> <span class="built_in">T</span> optional</span><br><span class="line"> <span class="operator">*</span><span class="operator">/</span></span><br><span class="line">type Partial<span class="operator">&lt;</span><span class="built_in">T</span><span class="operator">&gt;</span> <span class="operator">=</span> <span class="punctuation">&#123;</span></span><br><span class="line">  <span class="punctuation">[</span>P <span class="keyword">in</span> keyof <span class="built_in">T</span><span class="punctuation">]</span><span class="operator">?</span><span class="operator">:</span> <span class="built_in">T</span><span class="punctuation">[</span>P<span class="punctuation">]</span>;</span><br><span class="line"><span class="punctuation">&#125;</span>;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä»¥ä¸Šä»£ç ä¸­ï¼Œé¦–å…ˆé€šè¿‡ <code>keyof T</code> æ‹¿åˆ° <code>T</code> çš„æ‰€æœ‰å±æ€§åï¼Œç„¶åä½¿ç”¨ <code>in</code> è¿›è¡Œéå†ï¼Œå°†å€¼èµ‹ç»™ <code>P</code>ï¼Œæœ€åé€šè¿‡ <code>T[P]</code> å–å¾—ç›¸åº”çš„å±æ€§å€¼ã€‚ä¸­é—´çš„ <code>?</code> å·ï¼Œç”¨äºå°†æ‰€æœ‰å±æ€§å˜ä¸ºå¯é€‰ã€‚</p>
<p><strong>ç¤ºä¾‹ï¼š</strong></p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Todo</span> </span>&#123;</span><br><span class="line">  title: <span class="keyword">string</span>;</span><br><span class="line">  description: <span class="keyword">string</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateTodo</span>(<span class="params">todo: Todo, fieldsToUpdate: Partial&lt;Todo&gt;</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; ...todo, ...fieldsToUpdate &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">todo1</span> = &#123;</span><br><span class="line">  title: <span class="string">&quot;organize desk&quot;</span>,</span><br><span class="line">  description: <span class="string">&quot;clear clutter&quot;</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="variable constant_">todo2</span> = <span class="title function_ invoke__">updateTodo</span>(todo1, &#123;</span><br><span class="line">  <span class="attr">description</span>: <span class="string">&quot;throw out trash&quot;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šé¢çš„ <code>updateTodo</code> æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬åˆ©ç”¨ <code>Partial&lt;T&gt;</code> å·¥å…·ç±»å‹ï¼Œå®šä¹‰ <code>fieldsToUpdate</code> çš„ç±»å‹ä¸º <code>Partial&lt;Todo&gt;</code>ï¼Œå³ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   title?: <span class="built_in">string</span> | <span class="literal">undefined</span>;</span><br><span class="line">   description?: <span class="built_in">string</span> | <span class="literal">undefined</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
  </div>
  
    
      <a id="older" class="blog-nav" href="/article/DOM%E5%A4%8D%E4%B9%A0%E5%8F%8A%E5%89%8D%E7%AB%AF%E6%9E%B6%E6%9E%84/">OLDER&nbsp;&gt;</a>
      
        
          <a id="newer" class="blog-nav" href="/article/%E5%9F%BA%E4%BA%8ERedis%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85%E5%AE%9E%E7%8E%B0IM%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97/">&lt;&nbsp;NEWER</a>
          
            
</div>
        <div class="footer">
  
    <div class="footer-more">
      
        <a target="_blank" rel="noopener" href="https://github.com/Pengzna">Copyright Â© Pengzna 2021-present</a>
        
    </div>
  
</div>

      </div>

      <div class="back-to-top hidden">
  <a href="javascript: void(0)">
    <i class="iconfont icon-chevronup"></i>
  </a>
</div>


<script src="/js/backtotop.js"></script>



      
  <div class="search-icon" id="search-icon">
    <a href="javascript: void(0)">
      <i class="iconfont icon-search"></i>
    </a>
  </div>

  <div class="search-overlay hidden">
    <div class="search-content" tabindex="0">
      <div class="search-box">
        <div class="search-title">
          <!-- <span class="search-icon-input">
            <a href="javascript: void(0)">
              <i class="iconfont icon-search"></i>
            </a>
          </span> -->
          
            <input type="text" class="search-input" id="search-input" placeholder="æœç´¢">
          
          <span class="search-close-icon" id="search-close-icon">
            <a href="javascript: void(0)">
              <i class="iconfont icon-close"></i>
            </a>
          </span>
        </div>
        <div class="search-result" id="search-result"></div>
      </div>
    </div>
  </div>

  <script type="text/javascript">
    var inputArea = document.querySelector("#search-input")
    var searchOverlayArea = document.querySelector(".search-overlay")

    // inputArea.onclick = function() {
    //   getSearchFile()
    //   this.onclick = null
    // }

    inputArea.onkeydown = function() {
      if(event.keyCode == 13)
        return false
    }

    function openOrHideSearchContent() {
      let isHidden = searchOverlayArea.classList.contains('hidden')
      if (isHidden) {
        searchOverlayArea.classList.remove('hidden')
        document.body.classList.add('hidden')
        inputArea.focus()
        getSearchFile()
      } else {
        searchOverlayArea.classList.add('hidden')
        document.body.classList.remove('hidden')
      }
    }

    function blurSearchContent(e) {
      if (e.target === searchOverlayArea) {
        openOrHideSearchContent()
      }
    }

    document.querySelector("#search-icon").addEventListener("click", openOrHideSearchContent, false)
    document.querySelector("#search-close-icon").addEventListener("click", openOrHideSearchContent, false)
    searchOverlayArea.addEventListener("click", blurSearchContent, false)

    var searchFunc = function (path, search_id, content_id) {
      'use strict';
      var $input = document.getElementById(search_id);
      var $resultContent = document.getElementById(content_id);
      $resultContent.innerHTML = "<ul><span class='local-search-empty'><span></ul>";
      // $resultContent.innerHTML = "<ul><span class='local-search-empty'>First search, index file loading, please wait...<span></ul>";
      $.ajax({
        // 0x01. load xml file
        url: path,
        dataType: "xml",
        success: function (xmlResponse) {
          // 0x02. parse xml file
          var datas = $("entry", xmlResponse).map(function () {
            return {
              title: $("title", this).text(),
              content: $("content", this).text(),
              url: $("url", this).text()
            };
          }).get();
          $resultContent.innerHTML = "";

          $input.addEventListener('input', function () {
            // 0x03. parse query to keywords list
            var str = '<ul class=\"search-result-list\">';
            var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
            $resultContent.innerHTML = "";
            if (this.value.trim().length <= 0) {
              return;
            }
            // 0x04. perform local searching
            datas.forEach(function (data) {
              var isMatch = true;
              var content_index = [];
              if (!data.title || data.title.trim() === '') {
                data.title = "Untitled";
              }
              var orig_data_title = data.title.trim();
              var data_title = orig_data_title.toLowerCase();
              var orig_data_content = data.content.trim().replace(/<[^>]+>/g, "");
              var data_content = orig_data_content.toLowerCase();
              var data_url = data.url;
              var index_title = -1;
              var index_content = -1;
              var first_occur = -1;
              // only match artiles with not empty contents
              if (data_content !== '') {
                keywords.forEach(function (keyword, i) {
                  index_title = data_title.indexOf(keyword);
                  index_content = data_content.indexOf(keyword);

                  if (index_title < 0 && index_content < 0) {
                    isMatch = false;
                  } else {
                    if (index_content < 0) {
                      index_content = 0;
                    }
                    if (i == 0) {
                      first_occur = index_content;
                    }
                    // content_index.push({index_content:index_content, keyword_len:keyword_len});
                  }
                });
              } else {
                isMatch = false;
              }
              // 0x05. show search results
              if (isMatch) {
                str += "<li><a href='" + data_url + "' class='search-result-title'><h2>" + orig_data_title + "</h2></a>";
                var content = orig_data_content;
                if (first_occur >= 0) {
                  // cut out 100 characters
                  var start = first_occur - 20;
                  var end = first_occur + 80;

                  if (start < 0) {
                    start = 0;
                  }

                  if (start == 0) {
                    end = 100;
                  }

                  if (end > content.length) {
                    end = content.length;
                  }

                  var match_content = content.substr(start, end);

                  // highlight all keywords
                  keywords.forEach(function (keyword) {
                    var regS = new RegExp(keyword, "gi");
                    match_content = match_content.replace(regS, "<span class=\"search-keyword\">" + keyword + "</span>");
                  });

                  str += "<h3 class=\"search-result-abstract\">" + match_content + "...</h3>"
                }
                str += "<hr></li>";
              }
            });
            str += "</ul>";
            if (str.indexOf('<li>') === -1) {
              return $resultContent.innerHTML = "<ul><span class='local-search-empty'>No result<span></ul>";
            }
            $resultContent.innerHTML = str;
          });
        },
        error: function(xhr, status, error) {
          $resultContent.innerHTML = ""
          if (xhr.status === 404) {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>The search.xml file was not found, please refer toï¼š<a href='https://github.com/leedom92/hexo-theme-leedom#configuration' target='_black'>configuration</a><span></ul>";
          } else {
            $resultContent.innerHTML = "<ul><span class='local-search-empty'>The request failed, Try to refresh the page or try again later.<span></ul>";
          }
        }
      });
      $(document).on('click', '#search-close-icon', function() {
        $('#search-input').val('');
        $('#search-result').html('');
      });
    }

    var getSearchFile = function() {
        var path = "/search.xml";
        searchFunc(path, 'search-input', 'search-result');
    }
  </script>




    </div><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  </body>
</html>
